import{r as p,a as e}from"./react-ef3a9354.js";import"./Card.module-3bdbfb7f.js";import{a4 as te,bq as Ne,L as oe,c7 as Me,c8 as pe,c4 as Ae,al as ye,c9 as Fe,ca as Se,cb as Ie,cc as ze,cd as _e,ce as We,cf as Oe,cg as Ye,ch as He,ci as Re}from"./index-38e56929.js";import{a as se,u as K}from"./react-redux-60e7b2bb.js";import{L as ae,A as ne,D as re}from"./x-date-pickers-488148bd.js";import{c as je}from"./icons-material-e9adcbb1.js";import{u as ke,D as ge,G as we}from"./x-data-grid-f709ef26.js";import{j as Te}from"./utils-7edb168f.js";import{h as D,m as X,O as be,Q as De,a as qe,D as he,i as C,V as S,A as Z,l as ve,a3 as Ge,a4 as Ce}from"./material-a209ad60.js";import"./@babel-5e587562.js";import"./react-dom-7dcc36ef.js";import"./scheduler-765c72db.js";import"./redux-persist-cccb0614.js";import"./redux-fa075741.js";import"./@reduxjs-2459f64e.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-21b846bc.js";import"./hoist-non-react-statics-1d21e5a8.js";import"./react-router-c905df87.js";import"./@remix-run-8989dd9f.js";import"./react-router-dom-584a1cea.js";import"./react-icons-5ea1dfbe.js";import"./use-sync-external-store-54e50305.js";import"./system-5cdc79da.js";import"./styled-engine-b70b2ed8.js";import"./@emotion-afe87aa6.js";import"./stylis-79144faa.js";import"./private-theming-1cbad2aa.js";import"./react-transition-group-6e6f7170.js";import"./dom-helpers-9a525042.js";import"./base-7d25deaf.js";import"./@popperjs-f3391c26.js";import"./@date-io-28dabb9c.js";import"./dayjs-39ab3f8d.js";import"./clsx-1229b3e0.js";import"./rifm-3b678e07.js";import"./prop-types-a80e8cd9.js";import"./reselect-36a88051.js";const Ve=({supplierLS:P})=>{const T=[{field:"_id",headerName:"Id"},{field:"lsNo",headerName:"Challan no.",flex:1},{field:"date",headerName:"Date",flex:1},{field:"hire",headerName:"Hire amount",flex:1,type:"number",renderCell:i=>i.row.hire?e.createElement("strong",null,"₹ ",i.row.hire):null},{field:"advance",headerName:"Advance",flex:1,type:"number",renderCell:i=>i.row.advance?e.createElement("strong",null,"₹ ",i.row.advance):null},{field:"paid",headerName:"Paid",flex:1,type:"number",renderCell:i=>i.row.paid?e.createElement("strong",null,"₹ ",i.row.paid):null}],[z,O]=p.useState(!1),M=se(),_=ke(),{search:y}=K(({paymentadvice:i})=>i),[B,I]=p.useState([]),x=p.useMemo(()=>Te(i=>{var m,l,v;_.current.setQuickFilterValues((v=(l=(m=i.split)==null?void 0:m.call(i," "))==null?void 0:l.filter)==null?void 0:v.call(l,u=>u!==""))},500),[_]);p.useEffect(()=>{y&&(B!=null&&B.length)&&(O(!0),x(y),setTimeout(()=>{O(!1)},500))},[B]);const r=i=>{x(i.target.value),M(Me(i.target.value))};return p.useEffect(()=>{var i;if(P!=null&&P.length){const m=[];let l=0;(i=P==null?void 0:P.forEach)==null||i.call(P,(v,u)=>{var o,f,A,R,k,Q,F,Y;l=l+1,(k=m==null?void 0:m.push)==null||k.call(m,{_id:l,date:te(new Date(v.createdAt)),lsNo:Ne(v.lsNo),hire:(f=(o=v.hire)==null?void 0:o.toFixed)==null?void 0:f.call(o,2),advance:(R=(A=v.advance)==null?void 0:A.toFixed)==null?void 0:R.call(A,2),hamali:v.hamali,commission:v.commission,stacking:v.stacking,totalHire:v.hire+v.hamali-v.commission-v.stacking}),(Q=v.supplierPayments)!=null&&Q.length&&((Y=(F=v.supplierPayments)==null?void 0:F.forEach)==null||Y.call(F,V=>{var g,q,W;l=l+1;const d={};d._id=l,d.date=te(new Date(V.date)),d.lsNo=Ne(v.lsNo),d.paid=(q=(g=V.paid)==null?void 0:g.toFixed)==null?void 0:q.call(g,2),(W=m==null?void 0:m.push)==null||W.call(m,d)}))}),I(m)}else I([])},[P]),e.createElement(e.Fragment,null,e.createElement("h2",{className:"mb10"},"Payment history"),z?e.createElement(oe,null):!1,e.createElement(ge,{apiRef:_,sx:{backgroundColor:"primary.contrastText"},autoHeight:!0,density:"standard",getRowId:i=>i._id,rows:B,columns:T,initialState:{...T,columns:{columnVisibilityModel:{_id:!1}}},components:{Toolbar:()=>e.createElement(we,{sx:{gap:"6px",mb:"10px",justifyContent:"end",border:"none"}},e.createElement(D,{variant:"standard",placeholder:"Search...",autoFocus:!!y,onChange:r,value:y,InputProps:{startAdornment:e.createElement(X,{position:"start"},e.createElement(je,null))}}))},pageSize:10,rowsPerPageOptions:[10],disableSelectionOnClick:!0}))},Pe={branch:"",customer:"",paymentDate:new Date,outstanding:"",totalPaid:"",paidToday:"",payMode:null,chequeNo:"",chequeDate:null,jsmBank:null,jsmAccountNo:null,transactionNo:"",transactionDate:null},fe={paymentDate:{invalid:!1,message:""},paidToday:{invalid:!1,message:""},payMode:{invalid:!1,message:""},chequeNo:{invalid:!1,message:""},chequeDate:{invalid:!1,message:""},jsmBank:{invalid:!1,message:""},jsmAccountNo:{invalid:!1,message:""},transactionNo:{invalid:!1,message:""},transactionDate:{invalid:!1,message:""}},Qe=({suppliers:P,selectedSupplier:T,selectedSupplierType:z,setSelectedSupplier:O,places:M})=>{var W,U,J,L,ie,de,ce,ue,me,n;const _=[{field:"_id",headerName:"Id"},{field:"lsNo",headerName:"LS no.",flex:1,renderCell:t=>Ne(t.row.lsNo)},{field:"date",headerName:"Date",flex:1,renderCell:t=>te(new Date(t.row.createdAt))},{field:"vehicleNo",headerName:"Vehicle no.",flex:1},{field:"from",headerName:"From",flex:1,renderCell:t=>{var a;return(a=t.row.from)==null?void 0:a.name}},{field:"to",headerName:"To",flex:1,renderCell:t=>{var a;return(a=t.row.to)==null?void 0:a.name}},{field:"totalFreight",headerName:"Total freight",flex:1,type:"number",renderCell:t=>{var a,s;return e.createElement(e.Fragment,null,"₹ ",(s=(a=t.row.totalFreight)==null?void 0:a.toFixed)==null?void 0:s.call(a,2))}},{field:"rent",headerName:"Rent",flex:1,type:"number",renderCell:t=>{var a,s;return e.createElement(e.Fragment,null,"₹ ",(s=(a=t.row.rent)==null?void 0:a.toFixed)==null?void 0:s.call(a,2))}},{field:"advance",headerName:"Advance",flex:1,type:"number",renderCell:t=>{var a,s;return e.createElement(e.Fragment,null,"₹ ",(s=(a=t.row.advance)==null?void 0:a.toFixed)==null?void 0:s.call(a,2))}},{field:"totalPayable",headerName:"Total payable",flex:1,type:"number",renderCell:t=>{var a,s;return e.createElement(e.Fragment,null,"₹ ",(s=(a=t.row.totalPayable)==null?void 0:a.toFixed)==null?void 0:s.call(a,2))}},{field:"paid",headerName:"Paid",flex:1,type:"number",renderCell:t=>e.createElement(e.Fragment,null,"₹ ",t.row.paidToSupp)},{field:"suppPay",headerName:"Pay to supplier",flex:1,renderCell:t=>e.createElement(C,{fullWidth:!0,className:"tableTextfield"},e.createElement(D,{size:"small",variant:"outlined",value:t.row.suppPay||"",onChange:F.bind(null,"suppPay"),onInput:ye,name:t.row._id,id:`${t.row._id}_suppPay`,disabled:t.row.hire+t.row.hamali-t.row.advance===0,InputProps:{startAdornment:e.createElement(X,{position:"start"},"₹")}}))}],y=se(),B=K(pe),I=K(t=>t.user),[x,r]=p.useState(""),[i,m]=p.useState([]),[l,v]=p.useState(fe),[u,o]=p.useState(Pe),[f,A]=p.useState([]),{bankAccounts:R,banks:k}=K(({paymentadvice:t})=>t)||{},Q=()=>{y(Fe({supplier:T,branch:I.branch})).then(({payload:t={}})=>{var s,E;const{message:a}=(t==null?void 0:t.data)||{};if(a)r(a);else if(r(""),M!=null&&M.length){let N=0,b=0;const c=(E=(s=t==null?void 0:t.data)==null?void 0:s.map)==null?void 0:E.call(s,h=>{var H,G,$,ee;const j=(H=M==null?void 0:M.filter)==null?void 0:H.call(M,le=>le._id===h.from)[0],w=(G=M==null?void 0:M.filter)==null?void 0:G.call(M,le=>le._id===h.to)[0];return h.from=j==null?void 0:j.name,h.to=w==null?void 0:w.name,h.suppPay=0,h.paid=!1,h.paidToSupp=(ee=($=h.supplierPayments)==null?void 0:$.reduce)==null?void 0:ee.call($,(le,Be)=>le+Be.paid,0),N=N+h.totalFreight+h.advance-h.rent,b=b+h.paidToSupp,h});o(h=>({...h,outstanding:N,totalPaid:b})),m(c)}else m(t==null?void 0:t.data)}).catch(()=>{r("Something went wrong! Please try later or contact Administrator.")})};p.useEffect(()=>{T&&z&&Q(),(!T||!z)&&m([])},[T,z,M]),p.useEffect(()=>{u.jsmBank&&u.jsmBank._id&&A(()=>{var t;return(t=R==null?void 0:R.filter)==null?void 0:t.call(R,a=>a.bank===u.jsmBank._id)})},[u.jsmBank]),p.useEffect(()=>{o(t=>({...t,transactionNo:"",transactionDate:null,chequeDate:null,chequeNo:"",jsmBank:null,jsmAccountNo:null}))},[u.payMode]);const F=(t,a)=>{var b;const s=a.target.name,E=a.target.value;m(c=>{var j;const h=[...c];return(j=h==null?void 0:h.forEach)==null||j.call(h,w=>{w._id===s&&(E==="0"||!E?(w.suppPay=+E,w.paid=!1):(w.suppPay=+E,w.paid=!0))}),h});const N=(b=i==null?void 0:i.reduce)==null?void 0:b.call(i,(c,h)=>h.suppPay?+c+ +h.suppPay:+c,0);o(c=>({...c,paidToday:N}))},Y=t=>{var s,E;t.preventDefault();const a=(s=i==null?void 0:i.filter)==null?void 0:s.call(i,N=>N.paid);if(!V(u)&&(a!=null&&a.length)){const N=(E=a==null?void 0:a.map)==null?void 0:E.call(a,b=>{var c,h,j;return{ls_id:b._id,payment:{date:new Date,paid:b.suppPay,payMode:(c=u.payMode)==null?void 0:c.value,chequeNo:u.chequeNo,chequeDate:u.chequeDate,jsmBank:(h=u.jsmBank)==null?void 0:h.name,jsmAccountNo:(j=u.jsmAccountNo)==null?void 0:j.accountNo,transactionNo:u.transactionNo,transactionDate:u.transactionDate,createdBy:I._id}}});y(Se(N)).then(({payload:b={}})=>{const{message:c}=(b==null?void 0:b.data)||{};c?r(c):(r(""),Q(),v(fe)),o(Pe)}).catch(b=>{r(b.message)})}},V=t=>{var E,N,b,c,h,j,w,H,G;const a={...fe};t.paymentDate||(a.paymentDate={invalid:!0,message:"Date is required"}),+t.paidToday==0&&(a.paidToday={invalid:!0,message:"Paid should be greater than 0"}),t.payMode||(a.payMode={invalid:!0,message:"Payment mode is required"}),((E=t.payMode)==null?void 0:E.value)==="Cheque"&&((b=(N=t.chequeNo)==null?void 0:N.trim)!=null&&b.call(N)||(a.chequeNo={invalid:!0,message:"Cheque no is required"}),t.chequeDate||(a.chequeDate={invalid:!0,message:"Cheque date is required"})),(((c=t.payMode)==null?void 0:c.value)==="NEFT/RTGS"||((h=t.payMode)==null?void 0:h.value)==="Online banking")&&((w=(j=t.transactionNo)==null?void 0:j.trim)!=null&&w.call(j)||(a.transactionNo={invalid:!0,message:"Transaction no is required"}),t.transactionDate||(a.transactionDate={invalid:!0,message:"Transaction date is required"})),(((H=t.payMode)==null?void 0:H.value)==="NEFT/RTGS"||((G=t.payMode)==null?void 0:G.value)==="Online banking")&&(t.jsmBank||(a.jsmBank={invalid:!0,message:"Bank is required"}),t.jsmAccountNo||(a.jsmAccountNo={invalid:!0,message:"Account is required"}));let s=!1;for(const $ in a)a[$].invalid===!0&&(s=!0);return s&&v(a),s},d=(t,a)=>{o(t==="paymentDate"?s=>({...s,date:new Date(a)}):s=>({...s,[t]:new Date(a)}))},g=t=>{const a=t.target.name,s=t.target.value;o(E=>({...E,[a]:s})),a==="payMode"&&o(E=>({...E,chequeNo:"",chequeDate:null,jsmBank:"",jsmAccountNo:""}))},q=(t,a,s)=>{o(s==="jsmBank"?E=>({...E,[s]:a,jsmAccountNo:null}):E=>({...E,[s]:a}))};return e.createElement(e.Fragment,null,B&&e.createElement(oe,null),x!==""&&e.createElement(be,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(De,{severity:"error"},x)),e.createElement(qe,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement(he,{sx:{margin:"20px 0"}}),e.createElement("form",{action:"",onSubmit:Y},e.createElement(ge,{sx:{backgroundColor:"primary.contrastText"},autoHeight:!0,density:"standard",getRowId:t=>t._id,rows:i,columns:_,initialState:{..._,columns:{columnVisibilityModel:{_id:!1}}},pageSize:10,rowsPerPageOptions:[10],disableSelectionOnClick:!0}),e.createElement(he,{sx:{margin:"20px 0"}}),e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:l.paymentDate.invalid},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{error:l.paymentDate.invalid,label:"Date",inputFormat:"DD/MM/YYYY",value:u.paymentDate,disableFuture:!0,onChange:d.bind(null,"paymentDate"),inputProps:{readOnly:!0},renderInput:t=>e.createElement(D,{name:"paymentDate",size:"small",...t,error:l.paymentDate.invalid})})),l.paymentDate.invalid&&e.createElement(S,null,l.paymentDate.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0},e.createElement(D,{size:"small",variant:"outlined",label:"Total outstanding",value:u.outstanding||"",name:"outstanding",id:"outstanding",InputProps:{readOnly:!0,startAdornment:e.createElement(X,{position:"start"},"₹")}}))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0},e.createElement(D,{size:"small",variant:"outlined",label:"Total paid",value:u.totalPaid||"",name:"totalPaid",id:"totalPaid",InputProps:{readOnly:!0,startAdornment:e.createElement(X,{position:"start"},"₹")}}))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:l.paidToday.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Paid today",value:u.paidToday,error:l.paidToday.invalid,name:"paidToday",id:"paidToday",InputProps:{readOnly:!0,startAdornment:e.createElement(X,{position:"start"},"₹")}}),l.paidToday.invalid&&e.createElement(S,null,l.paidToday.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small",error:l.payMode.invalid},e.createElement(Z,{disablePortal:!0,autoSelect:!0,size:"small",name:"payMode",options:Ae,value:u.payMode,onChange:(t,a)=>q(t,a,"payMode"),openOnFocus:!0,renderInput:t=>e.createElement(D,{...t,label:"Payment mode",error:l.payMode.invalid,fullWidth:!0})}),l.payMode.invalid&&e.createElement(S,null,l.payMode.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:l.chequeNo.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Cheque no",value:u.chequeNo,error:l.chequeNo.invalid,name:"chequeNo",id:"chequeNo",onChange:g,disabled:((W=u.payMode)==null?void 0:W.value)!=="Cheque"}),l.chequeDate.invalid&&e.createElement(S,null,l.chequeNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:l.chequeDate.invalid},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{error:l.chequeDate.invalid,label:"Cheque date",disabled:((U=u.payMode)==null?void 0:U.value)!=="Cheque",inputFormat:"DD/MM/YYYY",value:u.chequeDate,onChange:d.bind(null,"chequeDate"),inputProps:{readOnly:!0},renderInput:t=>e.createElement(D,{name:"chequeDate",size:"small",...t,error:l.chequeDate.invalid})})),l.chequeDate.invalid&&e.createElement(S,null,l.chequeDate.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small",error:l.jsmBank.invalid},e.createElement(Z,{disablePortal:!0,autoSelect:!0,size:"small",name:"jsmBank",options:k,value:u.jsmBank,disabled:!u.payMode||((J=u.payMode)==null?void 0:J.value)==="Cash"||((L=u.payMode)==null?void 0:L.value)==="Cheque",onChange:(t,a)=>q(t,a,"jsmBank"),openOnFocus:!0,renderInput:t=>e.createElement(D,{...t,label:"Bank",error:l.jsmBank.invalid,fullWidth:!0})}),l.jsmBank.invalid&&e.createElement(S,null,l.jsmBank.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small",error:l.jsmAccountNo.invalid},e.createElement(Z,{disablePortal:!0,autoSelect:!0,size:"small",name:"jsmAccountNo",options:f,value:u.jsmAccountNo,disabled:!u.payMode||((ie=u.payMode)==null?void 0:ie.value)==="Cash"||((de=u.payMode)==null?void 0:de.value)==="Cheque",getOptionLabel:t=>t.accountNo,onChange:(t,a)=>q(t,a,"jsmAccountNo"),openOnFocus:!0,renderInput:t=>e.createElement(D,{...t,label:"Account no.",error:l.jsmAccountNo.invalid,fullWidth:!0})}),l.jsmAccountNo.invalid&&e.createElement(S,null,l.jsmAccountNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:l.transactionNo.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Transaction no",value:u.transactionNo,error:l.transactionNo.invalid,name:"transactionNo",id:"transactionNo",onChange:g,disabled:!u.payMode||((ce=u.payMode)==null?void 0:ce.value)==="Cash"||((ue=u.payMode)==null?void 0:ue.value)==="Cheque"}),l.transactionNo.invalid&&e.createElement(S,null,l.transactionNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:l.transactionDate.invalid},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{error:l.transactionDate.invalid,label:"Transaction date",disabled:!u.payMode||((me=u.payMode)==null?void 0:me.value)==="Cash"||((n=u.payMode)==null?void 0:n.value)==="Cheque",inputFormat:"DD/MM/YYYY",value:u.transactionDate,onChange:d.bind(null,"transactionDate"),inputProps:{readOnly:!0},renderInput:t=>e.createElement(D,{name:"transactionDate",size:"small",...t,error:l.transactionDate.invalid})})),l.transactionDate.invalid&&e.createElement(S,null,l.transactionDate.message)))),e.createElement("div",{className:"right mt10"},e.createElement(ve,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6 mt10"},"Save")))),e.createElement(Ve,{supplierLS:i}))},$e=({selectedSupplier:P,selectedSupplierType:T,setTriggerFetch:z})=>{var Q,F,Y,V;const O=p.useMemo(()=>({branch:"",supplier:P||"",supplierType:T||"",supplyContent:"",date:new Date,invoiceNo:"",invoiceDate:null,quantity:"",amount:""}),[P]),M={branch:{invalid:!1,message:""},supplyContent:{invalid:!1,message:""},date:{invalid:!1,message:""},invoiceNo:{invalid:!1,message:""},invoiceDate:{invalid:!1,message:""},quantity:{invalid:!1,message:""},amount:{invalid:!1,message:""}},_=se(),y=K(d=>d.user),B=K(pe),[I,x]=p.useState(O),[r,i]=p.useState(M),[m,l]=p.useState(""),{branches:v}=K(({paymentadvice:d})=>d)||{},u=p.useCallback(()=>{var g;const d=(g=v==null?void 0:v.find)==null?void 0:g.call(v,q=>q._id===y.branch);x(()=>({...O,branch:d}))},[O,y.branch]);p.useEffect(()=>{var d;if(y&&y.branch){const g=(d=v==null?void 0:v.find)==null?void 0:d.call(v,q=>q._id===y.branch);g!=null&&g._id&&x(q=>({...q,branch:g}))}},[y]);const o=d=>{var W,U;d.target.name==="amount"&&(d.target.value=(U=(W=d.target.value)==null?void 0:W.replace)==null?void 0:U.call(W,/[^0-9.-]/g,""));const g=d.target.name,q=d.target.value;x(J=>({...J,[g]:q}))},f=(d,g)=>{x(q=>({...q,[g]:d}))},A=(d,g)=>{x(q=>({...q,[d]:new Date(g)}))},R=d=>{var g;d.preventDefault(),k(I)||_(Ie({...I,branch:(g=I.branch)==null?void 0:g._id})).then(({payload:q={}})=>{const{message:W}=(q==null?void 0:q.data)||{};W?l(W):(l(""),u(),i(M)),z(!0)}).catch(q=>{l(q.message)})},k=d=>{var W,U,J,L;const g={...M};d.branch||(g.branch={invalid:!0,message:"Branch is required"}),(U=(W=d.invoiceNo)==null?void 0:W.trim)!=null&&U.call(W)||(g.invoiceNo={invalid:!0,message:"Invoice no is required"}),d.invoiceDate||(g.invoiceDate={invalid:!0,message:"Invoice date is required"}),(L=(J=d.quantity)==null?void 0:J.trim)!=null&&L.call(J)||(g.quantity={invalid:!0,message:"Quantity is required"}),d.amount<=0&&(g.amount={invalid:!0,message:"Amount is required"});let q=!1;for(const ie in g)g[ie].invalid===!0&&(q=!0);return q&&i(g),q};return e.createElement(e.Fragment,null,B&&e.createElement(oe,null),m!==""&&e.createElement(be,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(De,{severity:"error"},m)),e.createElement("h2",{className:"mb20"},"Add a new bill"),e.createElement("form",{action:"",onSubmit:R},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small",error:r.branch.invalid},e.createElement(Z,{disablePortal:!0,size:"small",name:"branch",options:v,value:I.branch||null,onChange:(d,g)=>f(g,"branch"),disabled:y&&y.type&&((F=(Q=y.type)==null?void 0:Q.toLowerCase)==null?void 0:F.call(Q))!=="superadmin"&&((V=(Y=y.type)==null?void 0:Y.toLowerCase)==null?void 0:V.call(Y))!=="admin",getOptionLabel:d=>d.name||"",openOnFocus:!0,renderInput:d=>e.createElement(D,{...d,label:"Branch",error:r.branch.invalid,fullWidth:!0})}),r.branch.invalid&&e.createElement(S,null,r.branch.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{label:"Date",inputFormat:"DD/MM/YYYY",value:I.date,disableFuture:!0,onChange:A.bind(null,"date"),inputProps:{readOnly:!0},renderInput:d=>e.createElement(D,{name:"date",size:"small",...d})})),r.date.invalid&&e.createElement(S,null,r.date.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:r.invoiceNo.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Invoice no",value:I.invoiceNo,onChange:o,name:"invoiceNo",id:"invoiceNo",error:r.invoiceNo.invalid}),r.invoiceNo.invalid&&e.createElement(S,null,r.invoiceNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:r.invoiceDate.invalid},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{label:"Invoice date",inputFormat:"DD/MM/YYYY",value:I.invoiceDate,disableFuture:!0,onChange:A.bind(null,"invoiceDate"),inputProps:{readOnly:!0},renderInput:d=>e.createElement(D,{name:"invoiceDate",size:"small",...d,error:r.invoiceDate.invalid})})),r.invoiceDate.invalid&&e.createElement(S,null,r.invoiceDate.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0},e.createElement(D,{size:"small",variant:"outlined",label:"Supply content",value:I.supplyContent,onChange:o,name:"supplyContent",id:"supplyContent"}))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:r.quantity.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Quantity",value:I.quantity,onChange:o,name:"quantity",id:"quantity",error:r.quantity.invalid}),r.quantity.invalid&&e.createElement(S,null,r.quantity.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:r.amount.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Amount",value:I.amount||"",error:r.amount.invalid,name:"amount",id:"amount",onChange:o,onInput:ye,InputProps:{startAdornment:e.createElement(X,{position:"start"},"₹")}}),r.amount.invalid&&e.createElement(S,null,r.amount.message)))),e.createElement("div",{className:"right"},e.createElement(ve,{variant:"outlined",size:"medium",onClick:u,className:"ml6"},"Cancel"),e.createElement(ve,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))))},Je=({supplierBills:P})=>{const T=[{field:"_id",headerName:"Id"},{field:"invoiceNo",headerName:"Invoice no.",flex:1},{field:"date",headerName:"Date",flex:1},{field:"amount",headerName:"Amount",flex:1,type:"number",renderCell:i=>i.row.amount?e.createElement("strong",null,"₹ ",i.row.amount):null},{field:"paid",headerName:"Paid",flex:1,type:"number",renderCell:i=>i.row.paid?e.createElement("strong",null,"₹ ",i.row.paid):null},{field:"payMode",headerName:"Payment mode",flex:1},{field:"chequeNo",headerName:"Cheque no",flex:1},{field:"chequeDate",headerName:"Cheque date",flex:1},{field:"bank",headerName:"Bank",flex:1},{field:"accountNo",headerName:"Account no",flex:1},{field:"transactionNo",headerName:"Transaction no",flex:1},{field:"transactionDate",headerName:"Transaction date",flex:1}],[z,O]=p.useState(!1),M=se(),_=ke(),{search:y}=K(({paymentadvice:i})=>i),[B,I]=p.useState([]),x=p.useMemo(()=>Te(i=>{var m,l,v;_.current.setQuickFilterValues((v=(l=(m=i.split)==null?void 0:m.call(i," "))==null?void 0:l.filter)==null?void 0:v.call(l,u=>u!==""))},500),[_]);p.useEffect(()=>{y&&(B!=null&&B.length)&&(O(!0),x(y),setTimeout(()=>{O(!1)},500))},[B]);const r=i=>{x(i.target.value),M(Me(i.target.value))};return p.useEffect(()=>{var i;if(P!=null&&P.length){const m=[];let l=0;(i=P==null?void 0:P.forEach)==null||i.call(P,(v,u)=>{var o,f,A,R;l=l+1,(o=m==null?void 0:m.push)==null||o.call(m,{_id:l,date:v.createdAt,invoiceNo:v.invoiceNo,amount:v.amount}),(f=v.payments)!=null&&f.length&&((R=(A=v.payments)==null?void 0:A.forEach)==null||R.call(A,(k,Q)=>{var Y,V,d,g,q;l=l+1;const F={};F._id=l,F.date=te(new Date(k.date)),F.paid=(V=(Y=k.paid)==null?void 0:Y.toFixed)==null?void 0:V.call(Y,2),F.amount=(g=(d=k.amount)==null?void 0:d.toFixed)==null?void 0:g.call(d,2),F.payMode=k.payMode,F.chequeNo=k.chequeNo?k.chequeNo:"-",F.chequeDate=k.chequeDate?te(k.chequeDate):"-",F.bank=k.jsmBank?k.jsmBank:"-",F.accountNo=k.jsmAccountNo?k.jsmAccountNo:"-",F.transactionNo=k.transactionNo?k.transactionNo:"-",F.transactionDate=k.transactionDate?te(k.transactionDate):"-",(q=m==null?void 0:m.push)==null||q.call(m,F)}))}),I(m)}else I([])},[P]),e.createElement(e.Fragment,null,e.createElement("h2",{className:"mb10"},"Payment history"),z?e.createElement(oe,null):!1,e.createElement(ge,{apiRef:_,sx:{backgroundColor:"primary.contrastText"},autoHeight:!0,density:"standard",getRowId:i=>i._id,rows:B,columns:T,initialState:{...T,columns:{columnVisibilityModel:{_id:!1}}},components:{Toolbar:()=>e.createElement(we,{sx:{gap:"6px",mb:"10px",justifyContent:"end",border:"none"}},e.createElement(D,{variant:"standard",placeholder:"Search...",autoFocus:!!y,onChange:r,value:y,InputProps:{startAdornment:e.createElement(X,{position:"start"},e.createElement(je,null))}}))},pageSize:10,rowsPerPageOptions:[10],disableSelectionOnClick:!0}))},xe={branch:"",customer:"",paymentDate:new Date,outstanding:"",totalPaid:"",paidToday:"",payMode:null,chequeNo:"",chequeDate:null,jsmBank:null,jsmAccountNo:null,transactionNo:"",transactionDate:null},Ee={paymentDate:{invalid:!1,message:""},paidToday:{invalid:!1,message:""},payMode:{invalid:!1,message:""},chequeNo:{invalid:!1,message:""},chequeDate:{invalid:!1,message:""},jsmBank:{invalid:!1,message:""},jsmAccountNo:{invalid:!1,message:""},transactionNo:{invalid:!1,message:""},transactionDate:{invalid:!1,message:""}},Ke=({selectedSupplier:P,selectedSupplierType:T,triggerFetch:z,setTriggerFetch:O})=>{var q,W,U,J,L,ie,de,ce,ue,me;const M=K(n=>n.user),_=K(pe),[y,B]=p.useState([]),[I,x]=p.useState(""),[r,i]=p.useState(xe),[m,l]=p.useState([]),[v,u]=p.useState([]),[o,f]=p.useState(Ee),A=se(),{banks:R}=K(({paymentadvice:n})=>n)||{},k=[{field:"_id",headerName:"Id"},{field:"date",headerName:"Date",flex:1,renderCell:n=>te(new Date(n.row.createdAt))},{field:"invoiceDate",headerName:"Invoice date",flex:1,renderCell:n=>te(new Date(n.row.createdAt))},{field:"invoiceNo",headerName:"Invoice no",flex:1},{field:"supplyContent",headerName:"Supply content",flex:1},{field:"quantity",headerName:"Quantity",flex:1},{field:"amount",headerName:"Bill amount",flex:1,type:"number",renderCell:n=>{var t,a;return e.createElement("strong",null,"₹ ",(a=(t=n.row.amount)==null?void 0:t.toFixed)==null?void 0:a.call(t,2))}},{field:"totalPaid",headerName:"Paid",flex:1,type:"number",renderCell:n=>{var t,a;return e.createElement("strong",null,"₹ ",(a=(t=n.row.totalPaid)==null?void 0:t.toFixed)==null?void 0:a.call(t,2))}},{field:"balance",headerName:"Balance",flex:1,type:"number",renderCell:n=>{var t,a;return e.createElement("strong",null,"₹ ",(a=(t=n.row.balance)==null?void 0:t.toFixed)==null?void 0:a.call(t,2))}},{field:"",headerName:"Action",flex:1,renderCell:n=>e.createElement(C,{fullWidth:!0,className:"tableTextfield"},e.createElement(D,{size:"small",variant:"outlined",value:n.row.suppPay||"",onChange:F.bind(null,"suppPay"),onInput:ye,name:n.row._id,id:`${n.row._id}_suppPay`,disabled:n.row.hire+n.row.hamali-n.row.advance===0,InputProps:{startAdornment:e.createElement(X,{position:"start"},"₹")}}))}];p.useEffect(()=>{A(ze()).then(({payload:n={}})=>{var a,s;const{message:t}=(n==null?void 0:n.data)||{};if(t)x(t);else{const E=(s=(a=n==null?void 0:n.data)==null?void 0:a.map)==null?void 0:s.call(a,N=>({...N,label:N.accountNo,value:N.accountNo}));l(E)}}).catch(()=>{x("Something went wrong! Please try later or contact Administrator.")})},[]),p.useEffect(()=>{P&&z&&T&&A(_e({supplier:P,branch:M.branch})).then(({payload:n={}})=>{var a,s;const{message:t}=(n==null?void 0:n.data)||{};if(t)x(t);else{x("");let E=0,N=0;const b=(s=(a=n==null?void 0:n.data)==null?void 0:a.map)==null?void 0:s.call(a,c=>{var j,w,H,G;const h=(w=(j=c.payments)==null?void 0:j.reduce)==null?void 0:w.call(j,($,ee)=>$+ee.paid,0);return c.paid=!1,c.totalPaid=h,c.suppPay=0,c.balance=c.amount-h,E=E+c.amount,c.paidToSupp=(G=(H=c.payments)==null?void 0:H.reduce)==null?void 0:G.call(H,($,ee)=>$+ee.paid,0),N=N+c.paidToSupp,c});i(c=>({...c,outstanding:E,totalPaid:N})),B(b),O(!1)}}).catch(n=>{x(n.message)}),(!P||!T)&&B([])},[P,O,z,T]);const Q=n=>{var a,s;n.preventDefault();const t=(a=y==null?void 0:y.filter)==null?void 0:a.call(y,E=>E.paid);if(!Y(r)){const E=(s=t==null?void 0:t.map)==null?void 0:s.call(t,N=>{var b,c,h;return{_id:N._id,payment:{date:new Date,paid:N.suppPay,payMode:(b=r.payMode)==null?void 0:b.value,chequeNo:r.chequeNo,chequeDate:r.chequeDate,jsmBank:(c=r.jsmBank)==null?void 0:c.name,jsmAccountNo:(h=r.jsmAccountNo)==null?void 0:h.accountNo,transactionNo:r.transactionNo,transactionDate:r.transactionDate,createdBy:M._id}}});E!=null&&E.length&&A(We(E)).then(({payload:N={}})=>{var c,h;const{message:b}=(N==null?void 0:N.data)||{};if(b)x(b);else{x("");const j=(h=(c=N==null?void 0:N.data)==null?void 0:c.map)==null?void 0:h.call(c,w=>{var G,$;const H=($=(G=w.payments)==null?void 0:G.reduce)==null?void 0:$.call(G,(ee,le)=>ee+le.paid,0);return w.totalPaid=H,w.pay=0,w.balance=w.amount-H,w});B(j),i(xe),f(Ee)}O(!0)}).catch(N=>{x(N.message)})}};p.useEffect(()=>{r.jsmBank&&r.jsmBank._id&&u(()=>{var n;return(n=m==null?void 0:m.filter)==null?void 0:n.call(m,t=>t.bank===r.jsmBank._id)})},[r.jsmBank]),p.useEffect(()=>{i(n=>({...n,transactionNo:"",transactionDate:null,chequeDate:null,chequeNo:"",jsmBank:null,jsmAccountNo:null}))},[r.payMode]);const F=(n,t)=>{var N;const a=t.target.name,s=t.target.value;B(b=>{var h;const c=[...b];return(h=c==null?void 0:c.forEach)==null||h.call(c,j=>{j._id===a&&(s==="0"||!s?(j.suppPay=+s,j.paid=!1):(j.suppPay=+s,j.paid=!0))}),c});const E=(N=y==null?void 0:y.reduce)==null?void 0:N.call(y,(b,c)=>c.suppPay?+b+ +c.suppPay:b,0);i(b=>({...b,paidToday:E}))},Y=n=>{var s,E,N,b,c,h,j,w,H;const t={...Ee};n.paymentDate||(t.paymentDate={invalid:!0,message:"Date is required"}),+n.paidToday==0&&(t.paidToday={invalid:!0,message:"Paid should be greater than 0"}),n.payMode||(t.payMode={invalid:!0,message:"Payment mode is required"}),((s=n.payMode)==null?void 0:s.value)==="Cheque"&&((N=(E=n.chequeNo)==null?void 0:E.trim)!=null&&N.call(E)||(t.chequeNo={invalid:!0,message:"Cheque no is required"}),n.chequeDate||(t.chequeDate={invalid:!0,message:"Cheque date is required"})),(((b=n.payMode)==null?void 0:b.value)==="NEFT/RTGS"||((c=n.payMode)==null?void 0:c.value)==="Online banking")&&((j=(h=n.transactionNo)==null?void 0:h.trim)!=null&&j.call(h)||(t.transactionNo={invalid:!0,message:"Transaction no is required"}),n.transactionDate||(t.transactionDate={invalid:!0,message:"Transaction date is required"})),(((w=n.payMode)==null?void 0:w.value)==="NEFT/RTGS"||((H=n.payMode)==null?void 0:H.value)==="Online banking")&&(n.jsmBank||(t.jsmBank={invalid:!0,message:"Bank is required"}),n.jsmAccountNo||(t.jsmAccountNo={invalid:!0,message:"Account is required"}));let a=!1;for(const G in t)t[G].invalid===!0&&(a=!0);return a&&f(t),a},V=(n,t)=>{i(n==="paymentDate"?a=>({...a,date:new Date(t)}):a=>({...a,[n]:new Date(t)}))},d=n=>{const t=n.target.name,a=n.target.value;i(s=>({...s,[t]:a})),t==="payMode"&&i(s=>({...s,chequeNo:"",chequeDate:null,jsmBank:"",jsmAccountNo:""}))},g=(n,t,a)=>{i(a==="jsmBank"?s=>({...s,[a]:t,jsmAccountNo:null}):s=>({...s,[a]:t}))};return e.createElement(e.Fragment,null,_&&e.createElement(oe,null),e.createElement("form",{action:"",onSubmit:Q},e.createElement(ge,{sx:{backgroundColor:"primary.contrastText"},autoHeight:!0,density:"standard",getRowId:n=>n._id,rows:y,columns:k,initialState:{...k,columns:{columnVisibilityModel:{_id:!1}}},pageSize:10,rowsPerPageOptions:[10],disableSelectionOnClick:!0}),e.createElement(he,{sx:{margin:"20px 0"}}),e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:o.paymentDate.invalid},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{error:o.paymentDate.invalid,label:"Date",inputFormat:"DD/MM/YYYY",value:r.paymentDate,disableFuture:!0,onChange:V.bind(null,"paymentDate"),inputProps:{readOnly:!0},renderInput:n=>e.createElement(D,{name:"paymentDate",size:"small",...n,error:o.paymentDate.invalid})})),o.paymentDate.invalid&&e.createElement(S,null,o.paymentDate.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0},e.createElement(D,{size:"small",variant:"outlined",label:"Total outstanding",value:r.outstanding||"",name:"outstanding",id:"outstanding",InputProps:{readOnly:!0,startAdornment:e.createElement(X,{position:"start"},"₹")}}))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0},e.createElement(D,{size:"small",variant:"outlined",label:"Total paid",value:r.totalPaid||"",name:"totalPaid",id:"totalPaid",InputProps:{readOnly:!0,startAdornment:e.createElement(X,{position:"start"},"₹")}}))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:o.paidToday.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Paid today",value:r.paidToday,error:o.paidToday.invalid,name:"paidToday",id:"paidToday",InputProps:{readOnly:!0,startAdornment:e.createElement(X,{position:"start"},"₹")}}),o.paidToday.invalid&&e.createElement(S,null,o.paidToday.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small",error:o.payMode.invalid},e.createElement(Z,{disablePortal:!0,autoSelect:!0,size:"small",name:"payMode",options:Ae,value:r.payMode,onChange:(n,t)=>g(n,t,"payMode"),openOnFocus:!0,renderInput:n=>e.createElement(D,{...n,label:"Payment mode",error:o.payMode.invalid,fullWidth:!0})}),o.payMode.invalid&&e.createElement(S,null,o.payMode.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:o.chequeNo.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Cheque no",value:r.chequeNo,error:o.chequeNo.invalid,name:"chequeNo",id:"chequeNo",onChange:d,disabled:((q=r.payMode)==null?void 0:q.value)!=="Cheque"}),o.chequeDate.invalid&&e.createElement(S,null,o.chequeNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:o.chequeDate.invalid},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{error:o.chequeDate.invalid,label:"Cheque date",disabled:((W=r.payMode)==null?void 0:W.value)!=="Cheque",inputFormat:"DD/MM/YYYY",value:r.chequeDate,onChange:V.bind(null,"chequeDate"),inputProps:{readOnly:!0},renderInput:n=>e.createElement(D,{name:"chequeDate",size:"small",...n,error:o.chequeDate.invalid})})),o.chequeDate.invalid&&e.createElement(S,null,o.chequeDate.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small",error:o.jsmBank.invalid},e.createElement(Z,{disablePortal:!0,autoSelect:!0,size:"small",name:"jsmBank",options:R,value:r.jsmBank,disabled:!r.payMode||((U=r.payMode)==null?void 0:U.value)==="Cash"||((J=r.payMode)==null?void 0:J.value)==="Cheque",onChange:(n,t)=>g(n,t,"jsmBank"),openOnFocus:!0,renderInput:n=>e.createElement(D,{...n,label:"Bank",error:o.jsmBank.invalid,fullWidth:!0})}),o.jsmBank.invalid&&e.createElement(S,null,o.jsmBank.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small",error:o.jsmAccountNo.invalid},e.createElement(Z,{disablePortal:!0,autoSelect:!0,size:"small",name:"jsmAccountNo",options:v,value:r.jsmAccountNo,disabled:!r.payMode||((L=r.payMode)==null?void 0:L.value)==="Cash"||((ie=r.payMode)==null?void 0:ie.value)==="Cheque",onChange:(n,t)=>g(n,t,"jsmAccountNo"),openOnFocus:!0,renderInput:n=>e.createElement(D,{...n,label:"Account no.",error:o.jsmAccountNo.invalid,fullWidth:!0})}),o.jsmAccountNo.invalid&&e.createElement(S,null,o.jsmAccountNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:o.transactionNo.invalid},e.createElement(D,{size:"small",variant:"outlined",label:"Transaction no",value:r.transactionNo,error:o.transactionNo.invalid,name:"transactionNo",id:"transactionNo",onChange:d,disabled:!r.payMode||((de=r.payMode)==null?void 0:de.value)==="Cash"||((ce=r.payMode)==null?void 0:ce.value)==="Cheque"}),o.transactionNo.invalid&&e.createElement(S,null,o.transactionNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,error:o.transactionDate.invalid},e.createElement(ae,{dateAdapter:ne},e.createElement(re,{error:o.transactionDate.invalid,label:"Transaction date",disabled:!r.payMode||((ue=r.payMode)==null?void 0:ue.value)==="Cash"||((me=r.payMode)==null?void 0:me.value)==="Cheque",inputFormat:"DD/MM/YYYY",value:r.transactionDate,onChange:V.bind(null,"transactionDate"),inputProps:{readOnly:!0},renderInput:n=>e.createElement(D,{name:"transactionDate",size:"small",...n,error:o.transactionDate.invalid})})),o.transactionDate.invalid&&e.createElement(S,null,o.transactionDate.message)))),e.createElement("div",{className:"right"},e.createElement(ve,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))),e.createElement(Je,{supplierBills:y}))},Ue=({suppliers:P,selectedSupplier:T,selectedSupplierType:z})=>{const[O,M]=p.useState(!0);return e.createElement(qe,{sx:{padding:"20px",marginBottom:"20px"}},T&&z&&z!=="Vehicle"?e.createElement(e.Fragment,null,e.createElement(e.Fragment,null,e.createElement($e,{selectedSupplier:T,selectedSupplierType:z,setTriggerFetch:M}),e.createElement(he,{sx:{margin:"20px 0"}}))):null,e.createElement(Ke,{selectedSupplier:T,selectedSupplierType:z,triggerFetch:O,setTriggerFetch:M}))},Xe=["Vehicle","Petrol","Tyre"],zt=()=>{const P=K(pe),[T,z]=p.useState(0),[O,M]=p.useState([]),[_,y]=p.useState("Vehicle"),[B,I]=p.useState([]),[x,r]=p.useState(""),[i,m]=p.useState(""),l=se();p.useEffect(()=>{if(i){const f=document.getElementById("alertError");f==null||f.scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}},[i]),p.useEffect(()=>{l(Oe()).then(({payload:f={}})=>{const{message:A}=(f==null?void 0:f.data)||{};A?m(A):(m(""),M(f==null?void 0:f.data))}).catch(()=>{m("Something went wrong! Please try later or contact Administrator.")}),l(Ye()),l(He())},[]),p.useEffect(()=>{_&&l(Re(_)).then(({payload:f={}})=>{const{message:A}=(f==null?void 0:f.data)||{};A?m(A):I(f==null?void 0:f.data)}).catch(()=>{m("Something went wrong! Please try later or contact Administrator.")})},[_]);const v=(f,A)=>{z(A)},u=(f,A)=>{r(A),z(0)},o=(f,A)=>{y(A),r(""),z(0)};return e.createElement(e.Fragment,null,P&&e.createElement(oe,null),e.createElement("div",{className:"inner-wrap"},i!==""&&e.createElement(be,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(De,{id:"alertError",severity:"error"},i)),e.createElement("div",{className:"page_head"},e.createElement("h1",{className:"pageHead"},"Payment advice")),e.createElement(qe,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small"},e.createElement(Z,{disablePortal:!0,size:"small",name:"branch",options:Xe,value:_||null,onChange:o,getOptionLabel:f=>f||"",openOnFocus:!0,renderInput:f=>e.createElement(D,{...f,label:"Select supplier type",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(C,{fullWidth:!0,size:"small"},e.createElement(Z,{disablePortal:!0,size:"small",name:"supplier",options:B,value:x||null,onChange:u,getOptionLabel:f=>f.name||"",openOnFocus:!0,renderInput:f=>e.createElement(D,{...f,label:"Select supplier",fullWidth:!0})}))))),e.createElement(Ge,{value:T,onChange:v,"aria-label":"basic tabs example"},e.createElement(Ce,{label:"Lorry receipt freight challan"}),e.createElement(Ce,{label:"Supplier's bills"})),T===0?e.createElement(Qe,{suppliers:B,selectedSupplier:x==null?void 0:x._id,selectedSupplierType:_,setSelectedSupplier:r,places:O}):null,T===1?e.createElement(Ue,{suppliers:B,selectedSupplier:x==null?void 0:x._id,selectedSupplierType:_}):null))};export{zt as default};
