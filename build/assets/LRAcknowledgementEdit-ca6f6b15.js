import{r as s,a as t}from"./react-69b9bddd.js";import{L as w,A as H,D as y}from"./x-date-pickers-f3802fc3.js";import{bC as z,bH as F,bI as P,L as _,bJ as I}from"./index-aeb4570c.js";import{u as B,a as O}from"./react-redux-13959126.js";import{a as Y,b as T}from"./react-router-7dadf37a.js";import{O as W,Q as M,a as j,i as u,h as p,V as q,l as v}from"./material-04052d9a.js";import"./@babel-5e587562.js";import"./@date-io-28dabb9c.js";import"./dayjs-39ab3f8d.js";import"./utils-49fe0532.js";import"./clsx-1229b3e0.js";import"./base-e8cfb5a9.js";import"./react-dom-69e96a05.js";import"./scheduler-765c72db.js";import"./@popperjs-f3391c26.js";import"./rifm-bf33b601.js";import"./system-49be6911.js";import"./styled-engine-f8044af8.js";import"./@emotion-17579717.js";import"./hoist-non-react-statics-1d21e5a8.js";import"./stylis-79144faa.js";import"./private-theming-ec89146b.js";import"./react-transition-group-deabed87.js";import"./dom-helpers-9a525042.js";import"./redux-persist-a379f351.js";import"./redux-fa075741.js";import"./@reduxjs-2459f64e.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-21b846bc.js";import"./react-router-dom-38324838.js";import"./@remix-run-8989dd9f.js";import"./icons-material-40f8e5d8.js";import"./react-icons-6bc9af43.js";import"./use-sync-external-store-20ba4de3.js";const J={lrNo:"",deliveryDate:new Date,_id:""},E={deliveryDate:{invalid:!1,message:""}},Re=()=>{const N=B(z),[n,c]=s.useState(J),[l,g]=s.useState(E),[f,i]=s.useState(""),[b,L]=s.useState(""),D=Y(),d=O(),k=T(),{lrId:o}=k.state,h=s.useCallback(()=>{D("/transactions/lrAcknowledgement")},[D]);s.useEffect(()=>{o&&!n._id&&(d(F(o)).then(({payload:e={}})=>{const{message:r}=(e==null?void 0:e.data)||{};r?i(r):(i(""),c(a=>({...a,lrNo:e==null?void 0:e.data.lrNo,_id:e==null?void 0:e.data._id})))}).catch(e=>{i(e.message)}),d(P(o)).then(({payload:e={}})=>{var r;L(((r=e==null?void 0:e.data)==null?void 0:r.lsNo)||"")}).catch(e=>{i(e.message)}))},[o,n._id]);const x=()=>{h()},C=e=>{e.preventDefault(),S(n)||d(I(n)).then(({payload:a={}})=>{const{message:m}=(a==null?void 0:a.data)||{};m?i(m):(i(""),g(E),h())}).catch(a=>{i(a.message)})},S=e=>{const r={...E};e.deliveryDate||(r.deliveryDate={invalid:!0,message:"Delivery date is required"});let a=!1;for(const m in r)r[m].invalid===!0&&(a=!0);return a&&g(r),a},R=(e,r)=>{c(a=>({...a,[e]:new Date(r)}))},A=e=>{c(r=>({...r,[e]:null}))};return t.createElement(t.Fragment,null,N&&t.createElement(_,null),t.createElement("div",{className:"inner-wrap"},t.createElement("h1",{className:"pageHead"},"Edit a lorry receipt acknowledgement"),f!==""&&t.createElement(W,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},t.createElement(M,{severity:"error"},f)),t.createElement("form",{action:"",onSubmit:C},t.createElement(j,{sx:{padding:"20px",marginBottom:"20px"}},t.createElement("div",{className:"grid grid-6-col"},t.createElement("div",{className:"grid-item"},t.createElement(u,{fullWidth:!0},t.createElement(p,{size:"small",variant:"outlined",label:"Lorry receipt no",value:n.lrNo,name:"lrNo",id:"lrNo",inputProps:{readOnly:!0}}))),t.createElement("div",{className:"grid-item"},t.createElement(u,{fullWidth:!0},t.createElement(p,{size:"small",variant:"outlined",label:"Challan no.",value:b,name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),t.createElement("div",{className:"grid-item"},t.createElement("div",{className:"bl_date"},t.createElement(u,{fullWidth:!0,error:l.deliveryDate.invalid},t.createElement(w,{dateAdapter:H},t.createElement(y,{error:l.deliveryDate.invalid,label:"Delivery date",inputFormat:"DD/MM/YYYY",value:n.deliveryDate,onChange:R.bind(null,"deliveryDate"),inputProps:{readOnly:!0},renderInput:e=>t.createElement(p,{name:"deliveryDate",size:"small",...e,error:l.deliveryDate.invalid})})),l.deliveryDate.invalid&&t.createElement(q,null,l.deliveryDate.message)),t.createElement(v,{variant:"text",size:"medium",className:"clearHandler",onClick:A.bind(null,"deliveryDate")},"Clear")))),t.createElement("div",{className:"right"},t.createElement(v,{variant:"outlined",size:"medium",onClick:x},"Back"),t.createElement(v,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))))))};export{Re as default};
