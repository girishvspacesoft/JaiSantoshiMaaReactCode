import{r as s,a as t}from"./react-ef3a9354.js";import{L as w,A as y,D as F}from"./x-date-pickers-488148bd.js";import{by as z,bD as H,bE as P,L as _,bF as B}from"./index-38e56929.js";import{u as I,a as O}from"./react-redux-60e7b2bb.js";import{a as Y,b as T}from"./react-router-c905df87.js";import{O as W,Q as M,a as j,i as u,h as p,V as q,l as v}from"./material-a209ad60.js";import"./@babel-5e587562.js";import"./@date-io-28dabb9c.js";import"./dayjs-39ab3f8d.js";import"./utils-7edb168f.js";import"./clsx-1229b3e0.js";import"./base-7d25deaf.js";import"./react-dom-7dcc36ef.js";import"./scheduler-765c72db.js";import"./@popperjs-f3391c26.js";import"./rifm-3b678e07.js";import"./system-5cdc79da.js";import"./styled-engine-b70b2ed8.js";import"./@emotion-afe87aa6.js";import"./hoist-non-react-statics-1d21e5a8.js";import"./stylis-79144faa.js";import"./private-theming-1cbad2aa.js";import"./react-transition-group-6e6f7170.js";import"./dom-helpers-9a525042.js";import"./redux-persist-cccb0614.js";import"./redux-fa075741.js";import"./@reduxjs-2459f64e.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-21b846bc.js";import"./react-router-dom-584a1cea.js";import"./@remix-run-8989dd9f.js";import"./icons-material-e9adcbb1.js";import"./react-icons-5ea1dfbe.js";import"./use-sync-external-store-54e50305.js";const Q={lrNo:"",deliveryDate:new Date,_id:""},E={deliveryDate:{invalid:!1,message:""}},Re=()=>{const N=I(z),[n,c]=s.useState(Q),[l,g]=s.useState(E),[D,i]=s.useState(""),[b,L]=s.useState(""),f=Y(),d=O(),k=T(),{lrId:o}=k.state,h=s.useCallback(()=>{f("/transactions/lrAcknowledgement")},[f]);s.useEffect(()=>{o&&!n._id&&(d(H(o)).then(({payload:e={}})=>{const{message:r}=(e==null?void 0:e.data)||{};r?i(r):(i(""),c(a=>({...a,lrNo:e==null?void 0:e.data.lrNo,_id:e==null?void 0:e.data._id})))}).catch(e=>{i(e.message)}),d(P(o)).then(({payload:e={}})=>{var r;L(((r=e==null?void 0:e.data)==null?void 0:r.lsNo)||"")}).catch(e=>{i(e.message)}))},[o,n._id]);const x=()=>{h()},S=e=>{e.preventDefault(),C(n)||d(B(n)).then(({payload:a={}})=>{const{message:m}=(a==null?void 0:a.data)||{};m?i(m):(i(""),g(E),h())}).catch(a=>{i(a.message)})},C=e=>{const r={...E};e.deliveryDate||(r.deliveryDate={invalid:!0,message:"Delivery date is required"});let a=!1;for(const m in r)r[m].invalid===!0&&(a=!0);return a&&g(r),a},R=(e,r)=>{c(a=>({...a,[e]:new Date(r)}))},A=e=>{c(r=>({...r,[e]:null}))};return t.createElement(t.Fragment,null,N&&t.createElement(_,null),t.createElement("div",{className:"inner-wrap"},t.createElement("h1",{className:"pageHead"},"Edit a lorry receipt acknowledgement"),D!==""&&t.createElement(W,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},t.createElement(M,{severity:"error"},D)),t.createElement("form",{action:"",onSubmit:S},t.createElement(j,{sx:{padding:"20px",marginBottom:"20px"}},t.createElement("div",{className:"grid grid-6-col"},t.createElement("div",{className:"grid-item"},t.createElement(u,{fullWidth:!0},t.createElement(p,{size:"small",variant:"outlined",label:"Lorry receipt no",value:n.lrNo,name:"lrNo",id:"lrNo",inputProps:{readOnly:!0}}))),t.createElement("div",{className:"grid-item"},t.createElement(u,{fullWidth:!0},t.createElement(p,{size:"small",variant:"outlined",label:"Challan no.",value:b,name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),t.createElement("div",{className:"grid-item"},t.createElement("div",{className:"bl_date"},t.createElement(u,{fullWidth:!0,error:l.deliveryDate.invalid},t.createElement(w,{dateAdapter:y},t.createElement(F,{error:l.deliveryDate.invalid,label:"Delivery date",inputFormat:"DD/MM/YYYY",value:n.deliveryDate,onChange:R.bind(null,"deliveryDate"),inputProps:{readOnly:!0},renderInput:e=>t.createElement(p,{name:"deliveryDate",size:"small",...e,error:l.deliveryDate.invalid})})),l.deliveryDate.invalid&&t.createElement(q,null,l.deliveryDate.message)),t.createElement(v,{variant:"text",size:"medium",className:"clearHandler",onClick:A.bind(null,"deliveryDate")},"Clear")))),t.createElement("div",{className:"right"},t.createElement(v,{variant:"outlined",size:"medium",onClick:x},"Back"),t.createElement(v,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))))))};export{Re as default};
