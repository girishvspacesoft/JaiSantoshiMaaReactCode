import{r as n,a as e}from"./react-bfabd40c.js";import{u as R,a as q}from"./react-redux-45d870ba.js";import{aY as w,bg as I,L as _,bh as D}from"./index-2b581a02.js";import"./Card.module-3bdbfb7f.js";import{a as Q}from"./react-router-622b2d59.js";import{O as V,Q as Y,a as j,i as m,A as G,h as c,V as S,l as x}from"./material-e0a59a28.js";import"./@babel-e11bafe1.js";import"./react-dom-b0178e93.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-6cfbf744.js";import"./use-sync-external-store-18921cc2.js";import"./redux-persist-d9cc1560.js";import"./redux-b7ba668d.js";import"./@reduxjs-4d37e7cf.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-4a70c6fc.js";import"./react-router-dom-60901e53.js";import"./@remix-run-d753ad9e.js";import"./icons-material-4539f19e.js";import"./react-icons-55b3b9a0.js";import"./system-a1d29c52.js";import"./styled-engine-f3bd09bf.js";import"./@emotion-77835cc8.js";import"./stylis-79144faa.js";import"./utils-c03c978f.js";import"./private-theming-970ac73c.js";import"./react-transition-group-7ded6f4d.js";import"./dom-helpers-9a525042.js";import"./base-ff50cfe3.js";import"./@popperjs-f3391c26.js";const O={lr:"",foNum:""},g={lr:{invalid:!1,message:""},foNum:{invalid:!1,message:""}},Se=()=>{var h,b,F,L;const z=R(w),C=R(t=>t.user),[l,p]=n.useState(O),[y,H]=n.useState([]),[s,v]=n.useState(g),[f,o]=n.useState(""),E=Q(),N=q(),W=n.useCallback(()=>{E("/transactions/lorryReceipts")},[E]);n.useEffect(()=>{N(I(C.branch)).then(({payload:t={}})=>{var r,i;const{message:a}=(t==null?void 0:t.data)||{};if(a)o(a);else{o("");const d=(i=(r=t==null?void 0:t.data)==null?void 0:r.map)==null?void 0:i.call(r,u=>({...u,label:u.lrNo,value:u.lrNo}));H(d)}}).catch(t=>{o(t.message)})},[]);const k=()=>{W()},P=t=>{const a=t.target.name,r=t.target.value;p(i=>({...i,[a]:r}))},A=t=>{if(t.preventDefault(),!B(l)){const a={_id:l.lr._id,foNum:l.foNum};N(D(a)).then(({payload:r={}})=>{const{message:i}=(r==null?void 0:r.data)||{};i?o(i):(o(""),p(O),v(g))}).catch(r=>{o(r.message)})}},B=t=>{var i,d;const a={...g};t.lr||(a.lr={invalid:!0,message:"Lorry receipt is required"}),(d=(i=t.foNum)==null?void 0:i.trim)!=null&&d.call(i)||(a.foNum={invalid:!0,message:"FO no is required"});let r=!1;for(const u in a)a[u].invalid===!0&&(r=!0);return r&&v(a),r},T=(t,a,r)=>{p(i=>({...i,[r]:a}))};return e.createElement(e.Fragment,null,z&&e.createElement(_,null),e.createElement("div",{className:"inner-wrap"},e.createElement("h1",{className:"pageHead"},"Add FO no"),f!==""&&e.createElement(V,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(Y,{severity:"error"},f)),e.createElement("form",{action:"",onSubmit:A,id:"lorryReceiptForm"},e.createElement(j,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(m,{fullWidth:!0,size:"small",error:s.lr.invalid},e.createElement(G,{disablePortal:!0,autoSelect:!0,autoHighlight:!0,size:"small",name:"vehicleNo",options:y,value:l.lr||null,onChange:(t,a)=>T(t,a,"lr"),openOnFocus:!0,renderInput:t=>e.createElement(c,{...t,label:"Lorry receipt",error:s.lr.invalid,fullWidth:!0})}),s.lr.invalid&&e.createElement(S,null,s.lr.message))),e.createElement("div",{className:"grid-item"},e.createElement(m,{fullWidth:!0},e.createElement(c,{size:"small",variant:"outlined",label:"Consignor",value:((h=l.lr)==null?void 0:h.consignorName)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(m,{fullWidth:!0},e.createElement(c,{size:"small",variant:"outlined",label:"From",value:((b=l.lr)==null?void 0:b.from)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(m,{fullWidth:!0},e.createElement(c,{size:"small",variant:"outlined",label:"Consignee",value:((F=l.lr)==null?void 0:F.consigneeName)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(m,{fullWidth:!0},e.createElement(c,{size:"small",variant:"outlined",label:"To",value:((L=l.lr)==null?void 0:L.to)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(m,{fullWidth:!0,error:s.foNum.invalid},e.createElement(c,{size:"small",variant:"outlined",label:"FO no.",value:l.foNum,onChange:P,error:s.foNum.invalid,name:"foNum",id:"foNum"}),s.foNum.invalid&&e.createElement(S,null,s.foNum.message)))),e.createElement("div",{className:"right"},e.createElement(x,{variant:"outlined",size:"medium",onClick:k},"Back"),e.createElement(x,{variant:"contained",size:"medium",type:"submit",color:"primary",form:"lorryReceiptForm",className:"ml6"},"Save"))))))};export{Se as default};
