import{r as v,a as e}from"./react-69b9bddd.js";import{a as K,u as M}from"./react-redux-13959126.js";import{aJ as U,aN as X,L as Y,an as Z,aO as $}from"./index-aeb4570c.js";import"./Card.module-3bdbfb7f.js";import{a as D}from"./react-router-7dadf37a.js";import{O as ee,Q as te,a as ae,i as s,A as y,h as m,V as u,l as B}from"./material-04052d9a.js";import"./@babel-5e587562.js";import"./react-dom-69e96a05.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-1d21e5a8.js";import"./use-sync-external-store-20ba4de3.js";import"./redux-persist-a379f351.js";import"./redux-fa075741.js";import"./@reduxjs-2459f64e.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-21b846bc.js";import"./react-router-dom-38324838.js";import"./@remix-run-8989dd9f.js";import"./icons-material-40f8e5d8.js";import"./react-icons-6bc9af43.js";import"./system-49be6911.js";import"./styled-engine-f8044af8.js";import"./@emotion-17579717.js";import"./stylis-79144faa.js";import"./utils-49fe0532.js";import"./private-theming-ec89146b.js";import"./react-transition-group-deabed87.js";import"./dom-helpers-9a525042.js";import"./base-e8cfb5a9.js";import"./@popperjs-f3391c26.js";const I={bank:"",ifsc:"",accountType:"",accountHolder:"",customerId:"",accountNo:"",openingBalance:""},A={bank:{invalid:!1,message:""},ifsc:{invalid:!1,message:""},accountType:{invalid:!1,message:""},accountHolder:{invalid:!1,message:""},customerId:{invalid:!1,message:""},accountNo:{invalid:!1,message:""},openingBalance:{invalid:!1,message:""}},Le=()=>{const[d,R]=v.useState([]),[r,p]=v.useState(I),[n,C]=v.useState(A),[H,g]=v.useState(""),S=D(),T=K(),w=M(U),x=v.useCallback(()=>{S("/master/bankAccounts")},[S]);v.useEffect(()=>{T(X()).then(({payload:t={}})=>{const{message:a}=(t==null?void 0:t.data)||{};a?g(a):R(t==null?void 0:t.data)}).catch(t=>{g(t.message)})},[]);const P=()=>{p(I),g(""),C(A)},_=()=>{x()},f=t=>{var c;const a=t.target.name,i=t.target.value;if(p(l=>({...l,[a]:i})),a==="bank"){const l=(c=d==null?void 0:d.filter)==null?void 0:c.call(d,o=>o._id===i);l!=null&&l.length&&p(o=>({...o,ifsc:l[0].ifsc}))}},J=(t,a)=>{p(i=>({...i,bank:a,ifsc:(a==null?void 0:a.ifsc)||""}))},Q=(t,a)=>{p(i=>({...i,accountType:a}))},V=t=>{var a;t.preventDefault(),j(r)||T($({...r,bank:(a=r.bank)==null?void 0:a._id})).then(({payload:i={}})=>{const{message:c}=(i==null?void 0:i.data)||{};c?g(c):(g(""),p(I),x())}).catch(i=>{g(i.message)})},j=t=>{var c,l,o,z,E,F,b,O,h,W,N,L,k,q;const a={...A};t.bank||(a.bank={invalid:!0,message:"Bank is required"}),(l=(c=t.ifsc)==null?void 0:c.trim)!=null&&l.call(c)||(a.ifsc={invalid:!0,message:"IFSC code is required"}),(z=(o=t.accountHolder)==null?void 0:o.trim)!=null&&z.call(o)||(a.accountHolder={invalid:!0,message:"Account holder name is required"}),(F=(E=t.accountType)==null?void 0:E.trim)!=null&&F.call(E)||(a.accountType={invalid:!0,message:"Account type is required"}),(O=(b=t.customerId)==null?void 0:b.trim)!=null&&O.call(b)||(a.customerId={invalid:!0,message:"Customer ID is required"}),(W=(h=t.accountNo)==null?void 0:h.trim)!=null&&W.call(h)||(a.accountNo={invalid:!0,message:"Account number is required"}),(L=(N=t.openingBalance)==null?void 0:N.trim)!=null&&L.call(N)||(a.openingBalance={invalid:!0,message:"Opening balance is required"}),((q=(k=t.openingBalance)==null?void 0:k.trim)==null?void 0:q.call(k))!==""&&isNaN(t.openingBalance)&&isNaN(parseFloat(t.openingBalance))&&(a.openingBalance={invalid:!0,message:"Opening balance should be a number"});let i=!1;for(const G in a)a[G].invalid===!0&&(i=!0);return i&&C(a),i};return e.createElement(e.Fragment,null,e.createElement("div",{className:"inner-wrap"},w&&e.createElement(Y,null),e.createElement("h1",{className:"pageHead"},"Add a bank account"),H!==""&&e.createElement(ee,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(te,{severity:"error"},H)),e.createElement(ae,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("form",{action:"",onSubmit:V},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small",error:n.bank.invalid},e.createElement(y,{autoSelect:!0,size:"small",name:"bank",options:d,value:r.bank||null,onChange:(t,a)=>J(t,a),openOnFocus:!0,getOptionLabel:t=>t.name,renderInput:t=>e.createElement(m,{...t,label:"Bank",error:n.bank.invalid,fullWidth:!0})}),n.bank.invalid&&e.createElement(u,null,n.bank.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.ifsc.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"IFSC",value:r.ifsc,error:n.ifsc.invalid,onChange:f,name:"ifsc",id:"ifsc",InputProps:{readOnly:!0}}),n.ifsc.invalid&&e.createElement(u,null,n.ifsc.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small",error:n.accountType.invalid},e.createElement(y,{autoSelect:!0,size:"small",name:"accountType",options:["Current account","Saving account","Recurring account","Fixed Deposit / Account"],value:r.accountType||null,onChange:(t,a)=>Q(t,a),openOnFocus:!0,getOptionLabel:t=>t,renderInput:t=>e.createElement(m,{...t,label:"Account type",error:n.accountType.invalid,fullWidth:!0})}),n.accountType.invalid&&e.createElement(u,null,n.accountType.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.accountHolder.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Account holder",value:r.accountHolder,error:n.accountHolder.invalid,onChange:f,name:"accountHolder",id:"accountHolder"}),n.accountHolder.invalid&&e.createElement(u,null,n.accountHolder.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.customerId.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Customer Id",error:n.customerId.invalid,value:r.customerId,onChange:f,name:"customerId",id:"customerId"}),n.customerId.invalid&&e.createElement(u,null,n.customerId.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.accountNo.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Account number",value:r.accountNo,error:n.accountNo.invalid,onChange:f,name:"accountNo",id:"accountNo"}),n.accountNo.invalid&&e.createElement(u,null,n.accountNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.openingBalance.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Opening balance",value:r.openingBalance||"",error:n.openingBalance.invalid,onChange:f,onInput:Z,name:"openingBalance",id:"openingBalance"}),n.openingBalance.invalid&&e.createElement(u,null,n.openingBalance.message)))),e.createElement("div",{className:"right"},e.createElement(B,{variant:"outlined",size:"medium",onClick:_},"Back"),e.createElement(B,{variant:"outlined",size:"medium",onClick:P,className:"ml6"},"Reset"),e.createElement(B,{variant:"outlined",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))))))};export{Le as default};
