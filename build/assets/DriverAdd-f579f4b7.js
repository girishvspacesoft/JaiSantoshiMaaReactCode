import{r as u,a as e}from"./react-bfabd40c.js";import{L as N,A as D,D as Y}from"./x-date-pickers-7b1cc7dd.js";import{V as J,Z,_,L as $,O as T,$ as K,R as P}from"./index-60b53c60.js";import"./Card.module-3bdbfb7f.js";import{a as U,u as X}from"./react-redux-45d870ba.js";import{a as ee}from"./react-router-1b5f20a2.js";import{O as te,Q as re,a as ae,i,h as l,V as p,A as C,l as z}from"./material-e0a59a28.js";import"./@babel-e11bafe1.js";import"./@date-io-f382d426.js";import"./dayjs-7f45ce31.js";import"./utils-c03c978f.js";import"./clsx-1229b3e0.js";import"./base-ff50cfe3.js";import"./@popperjs-f3391c26.js";import"./react-dom-b0178e93.js";import"./scheduler-765c72db.js";import"./rifm-7b0f12ad.js";import"./system-a1d29c52.js";import"./styled-engine-f3bd09bf.js";import"./@emotion-77835cc8.js";import"./hoist-non-react-statics-6cfbf744.js";import"./stylis-79144faa.js";import"./private-theming-970ac73c.js";import"./react-transition-group-7ded6f4d.js";import"./dom-helpers-9a525042.js";import"./redux-persist-d9cc1560.js";import"./redux-b7ba668d.js";import"./@reduxjs-4d37e7cf.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-4a70c6fc.js";import"./react-router-dom-4405dfe9.js";import"./@remix-run-d753ad9e.js";import"./icons-material-4539f19e.js";import"./react-icons-55b3b9a0.js";import"./use-sync-external-store-18921cc2.js";const x={code:"",name:"",correspondenceAddress:"",permanentAddress:"",dateOfBirth:null,telephone:"",mobile:"",fatherName:"",referencedBy:"",eyeSight:"",licenseNo:"",licenseType:"",qualification:"",joiningDate:null,bloodGroup:"",renewDate:null,expiryDate:null,remark:""},B={name:{invalid:!1,message:""},correspondenceAddress:{invalid:!1,message:""},telephone:{invalid:!1,message:""},mobile:{invalid:!1,message:""},licenseNo:{invalid:!1,message:""}},Pe=()=>{const[a,c]=u.useState(x),[n,W]=u.useState(B),[y,d]=u.useState(""),M=U(),j=X(J),F=ee(),O=u.useCallback(()=>{F("/master/drivers")},[F]);u.useEffect(()=>{M(Z()).then(({payload:t={}})=>{const{message:r}=(t==null?void 0:t.data)||{};r?d(r):(d(""),c(s=>({...s,code:_(t==null?void 0:t.data)})))}).catch(t=>{d(t.message)})},[]);const q=()=>{c(t=>({...x,code:t.code})),d(""),W(B)},R=()=>{O()},m=t=>{const r=t.target.name,s=t.target.value;c(o=>({...o,[r]:s}))},A=(t,r)=>{c(s=>({...s,[r]:t}))},G=t=>{if(t.preventDefault(),!Q(a)){const r=a;r.dateOfBirth&&(r.dateOfBirth=new Date(r.dateOfBirth)),r.joiningDate&&(r.joiningDate=new Date(r.joiningDate)),r.renewDate&&(r.renewDate=new Date(r.renewDate)),r.expiryDate&&(r.expiryDate=new Date(r.expiryDate)),M(K(r)).then(({payload:s={}})=>{const{message:o}=(s==null?void 0:s.data)||{};o?d(o):(d(""),c(x),O())}).catch(s=>{d(s.message)})}},v=(t,r)=>{c(s=>({...s,[t]:r}))},Q=t=>{var o,w,g,S,h,k,E,I,f,L,b,H;const r={...B};(w=(o=t.name)==null?void 0:o.trim)!=null&&w.call(o)||(r.name={invalid:!0,message:"Name is required"}),(S=(g=t.correspondenceAddress)==null?void 0:g.trim)!=null&&S.call(g)||(r.correspondenceAddress={invalid:!0,message:"Address is required"}),(k=(h=t.telephone)==null?void 0:h.trim)!=null&&k.call(h)||(r.telephone={invalid:!0,message:"Telephone is required"}),t.telephone&&((I=(E=t.telephone)==null?void 0:E.trim)==null?void 0:I.call(E))!==""&&!P.test(t.telephone)&&(r.telephone={invalid:!0,message:"Telephone number should be 10 digits number"}),t.mobile&&((L=(f=t.mobile)==null?void 0:f.trim)==null?void 0:L.call(f))!==""&&!P.test(t.mobile)&&(r.mobile={invalid:!0,message:"Mobile number should be 10 digits number"}),(H=(b=t.licenseNo)==null?void 0:b.trim)!=null&&H.call(b)||(r.licenseNo={invalid:!0,message:"License no is required"});let s=!1;for(const V in r)r[V].invalid===!0&&(s=!0);return s&&W(r),s};return e.createElement(e.Fragment,null,j&&e.createElement($,null),e.createElement("h1",{className:"pageHead"},"Add a driver"),y!==""&&e.createElement(te,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(re,{severity:"error"},y)),e.createElement("form",{action:"",onSubmit:G},e.createElement("div",{className:"inner-wrap"},e.createElement(ae,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0},e.createElement(l,{size:"small",variant:"outlined",label:"Code",value:a.code,onChange:m,name:"code",id:"code",InputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:n.name.invalid},e.createElement(l,{size:"small",variant:"outlined",label:"Driver name",value:a.name,error:n.name.invalid,onChange:m,name:"name",id:"name"}),n.name.invalid&&e.createElement(p,null,n.name.message))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:n.correspondenceAddress.invalid},e.createElement(l,{size:"small",variant:"outlined",label:"Correspondence address",value:a.correspondenceAddress,error:n.correspondenceAddress.invalid,onChange:m,name:"correspondenceAddress",id:"correspondenceAddress"}),n.correspondenceAddress.invalid&&e.createElement(p,null,n.correspondenceAddress.message))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0},e.createElement(l,{size:"small",variant:"outlined",label:"Permanent address",value:a.permanentAddress,onChange:m,name:"permanentAddress",id:"permanentAddress"}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:!0},e.createElement(N,{dateAdapter:D},e.createElement(Y,{label:"Date of birth",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.dateOfBirth,disableFuture:!0,onChange:v.bind(null,"dateOfBirth"),renderInput:t=>e.createElement(l,{name:"dateOfBirth",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:n.telephone.invalid},e.createElement(l,{size:"small",variant:"outlined",label:"Telephone",value:a.telephone,error:n.telephone.invalid,onChange:m,onInput:T,name:"telephone",id:"telephone"}),n.telephone.invalid&&e.createElement(p,null,n.telephone.message))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:n.mobile.invalid},e.createElement(l,{size:"small",variant:"outlined",label:"Mobile",value:a.mobile,error:n.mobile.invalid,onChange:m,onInput:T,name:"mobile",id:"mobile"}),n.mobile.invalid&&e.createElement(p,null,n.mobile.message))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0},e.createElement(l,{size:"small",variant:"outlined",label:"Father name",value:a.fatherName,onChange:m,name:"fatherName",id:"fatherName"}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0},e.createElement(l,{size:"small",variant:"outlined",label:"Referenced by",value:a.referencedBy,onChange:m,name:"referencedBy",id:"referencedBy"}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,size:"small"},e.createElement(C,{disablePortal:!0,size:"small",name:"eyeSight",options:["Normal","Good"],value:a.eyeSight||null,onChange:(t,r)=>A(r,"eyeSight"),openOnFocus:!0,renderInput:t=>e.createElement(l,{...t,label:"Eyesight",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:n.licenseNo.invalid},e.createElement(l,{size:"small",variant:"outlined",label:"License no",value:a.licenseNo,error:n.licenseNo.invalid,onChange:m,name:"licenseNo",id:"licenseNo"}),n.licenseNo.invalid&&e.createElement(p,null,n.licenseNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,size:"small"},e.createElement(C,{disablePortal:!0,size:"small",name:"licenseType",options:["Higher heavy","Heavy","Non-heavy","Normal"],value:a.licenseType||null,onChange:(t,r)=>A(r,"licenseType"),openOnFocus:!0,renderInput:t=>e.createElement(l,{...t,label:"License type",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:!0},e.createElement(N,{dateAdapter:D},e.createElement(Y,{label:"Renew date",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.renewDate,onChange:v.bind(null,"renewDate"),renderInput:t=>e.createElement(l,{name:"renewDate",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:!0},e.createElement(N,{dateAdapter:D},e.createElement(Y,{label:"Expiry date",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.expiryDate,onChange:v.bind(null,"expiryDate"),renderInput:t=>e.createElement(l,{name:"expiryDate",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0},e.createElement(l,{size:"small",variant:"outlined",label:"Qualification",value:a.qualification,onChange:m,name:"qualification",id:"qualification"}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,error:!0},e.createElement(N,{dateAdapter:D},e.createElement(Y,{label:"Joining date",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.joiningDate,onChange:v.bind(null,"joiningDate"),renderInput:t=>e.createElement(l,{name:"joiningDate",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0,size:"small"},e.createElement(C,{disablePortal:!0,size:"small",name:"bloodGroup",options:["A-","B-","AB-","O-","A+","B+","AB+","O+"],value:a.bloodGroup||null,onChange:(t,r)=>A(r,"bloodGroup"),openOnFocus:!0,renderInput:t=>e.createElement(l,{...t,label:"Blood group",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(i,{fullWidth:!0},e.createElement(l,{size:"small",variant:"outlined",label:"Remark",value:a.remark,onChange:m,name:"remark",id:"remark"})))),e.createElement("div",{className:"right"},e.createElement(z,{variant:"outlined",size:"medium",onClick:R},"Back"),e.createElement(z,{variant:"outlined",size:"medium",onClick:q,className:"ml6"},"Reset"),e.createElement(z,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))))))};export{Pe as default};
