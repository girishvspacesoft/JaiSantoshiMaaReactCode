import{r as N,a as t}from"./react-69b9bddd.js";import{a5 as b}from"./index-1d9d8716.js";import{L as k,A as x,D as C}from"./x-date-pickers-f3802fc3.js";import{i as D,h as F,F as v,g as w,a0 as B,l as H,D as O}from"./material-04052d9a.js";import{D as W}from"./x-data-grid-83fc2422.js";const V=({lorryReceipts:a,setLRForBill:$,bill:i,dateInputChangeHandler:c,setBill:S})=>{var f;const A=e=>`${e.from} to ${e.to}`,z=e=>{var n,m;return(m=(n=e.transactions)==null?void 0:n.reduce)==null?void 0:m.call(n,(l,r)=>l+ +r.articleNo,0)},d=[{field:"_id",headerName:"Id"},{field:"lrNo",headerName:"LR no.",flex:1},{field:"description",headerName:"Description",flex:1,renderCell:e=>A(e.row)},{field:"articles",headerName:"Articles",flex:1,renderCell:e=>z(e.row)},{field:"wayBillNo",headerName:"Way bill no & date",flex:1,renderCell:e=>e.row.wayBillNo?`${e.row.wayBillNo} ${b(e.row.date)}`:b(e.row.date)},{field:"memoNo",headerName:"Memo no.",flex:1},{field:"total",headerName:"Amount",flex:1,renderCell:e=>{var n,m;return t.createElement("strong",null,"â‚¹ ",(m=(n=Number(e.row.total))==null?void 0:n.toFixed)==null?void 0:m.call(n,2))}}],[Y,s]=N.useState([]),[u,h]=N.useState(!1),M=e=>{e.preventDefault(),S(n=>({...n,lrList:[...Y]}))},P=e=>{var r,g,E;const n=e.target.name,m=e.target.checked,l=(r=a==null?void 0:a.map)==null?void 0:r.call(a,o=>(o._id===n&&(o.checked=m),o));s((g=l==null?void 0:l.filter)==null?void 0:g.call(l,o=>o.checked)),h((E=l==null?void 0:l.every)==null?void 0:E.call(l,o=>o.checked))},_=e=>{var m,l;h(e.target.checked);const n=(m=a==null?void 0:a.map)==null?void 0:m.call(a,r=>(r.checked=e.target.checked,r));s((l=n==null?void 0:n.filter)==null?void 0:l.call(n,r=>r.checked))};return t.createElement(t.Fragment,null,t.createElement("div",{className:"grid grid-6-col"},t.createElement("div",{className:"grid-item"},t.createElement("h2",{className:"mb20 text-inline"},"Lorry receipts")),t.createElement("div",{className:"grid-item"},t.createElement(D,{fullWidth:!0},t.createElement(k,{dateAdapter:x},t.createElement(C,{label:"From",inputFormat:"DD/MM/YYYY",value:i.from||null,disableFuture:!0,maxDate:i.to,onChange:c.bind(null,"from"),inputProps:{readOnly:!0},renderInput:e=>t.createElement(F,{name:"from",size:"small",...e})})))),t.createElement("div",{className:"grid-item"},t.createElement(D,{fullWidth:!0},t.createElement(k,{dateAdapter:x},t.createElement(C,{label:"To",inputFormat:"DD/MM/YYYY",value:i.to||null,disableFuture:!0,minDate:i.from,onChange:c.bind(null,"to"),inputProps:{readOnly:!0},renderInput:e=>t.createElement(F,{name:"to",size:"small",...e})})))),(a==null?void 0:a.length)>0&&t.createElement("div",{className:"grid-item"},t.createElement(v,{className:"groupCheckbox",key:"selectAll",control:t.createElement(w,{name:u,size:"small",checked:u,onChange:_}),label:t.createElement("span",{style:{fontSize:"0.9em",display:"inline-block",lineHeight:"1em"}},"Select all")}))),t.createElement("form",{action:"",onSubmit:M,id:"lrSelectionForm"},(a==null?void 0:a.length)===0&&t.createElement("p",null,"No lorry receipts found for billing!"),t.createElement("div",{className:"bl_lrCheckboxes"},t.createElement(B,{className:"checkboxGroup"},(a==null?void 0:a.length)>0&&((f=a==null?void 0:a.map)==null?void 0:f.call(a,e=>t.createElement(v,{className:"groupCheckbox",key:e.lrNo,control:t.createElement(w,{name:e._id,size:"small",checked:e.checked,onChange:P}),label:t.createElement("span",{style:{fontSize:"0.9em",display:"inline-block",lineHeight:"1em"}},e.lrNo)}))))),t.createElement("div",{className:"right"},t.createElement(H,{variant:"contained",size:"medium",type:"submit",color:"primary",form:"lrSelectionForm",className:"ml6"},"Add"))),t.createElement(O,{sx:{margin:"20px 0"}}),t.createElement(W,{sx:{backgroundColor:"primary.contrastText"},autoHeight:!0,density:"compact",getRowId:e=>e._id||Math.random(),rows:i.lrList,columns:d,initialState:{...d,columns:{columnVisibilityModel:{_id:!1}}},pageSize:10,rowsPerPageOptions:[10],disableSelectionOnClick:!0}))};export{V as L};
