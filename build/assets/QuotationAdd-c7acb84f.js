import{r as v,a as e}from"./react-bfabd40c.js";import{u as Y,a as V}from"./react-redux-45d870ba.js";import{f as _}from"./icons-material-4539f19e.js";import{L as x,A as z,D as F}from"./x-date-pickers-7b1cc7dd.js";import"./Card.module-3bdbfb7f.js";import{d6 as G,L as J,al as K,dc as U}from"./index-66f971e4.js";import{S as X}from"./Stations-f720caf4.js";import{a as Z}from"./react-router-622b2d59.js";import{O as $,Q as ee,a as te,i as s,h as m,V as p,m as ae,D as W,a5 as re,a6 as le,a7 as ie,a8 as k,a9 as n,aa as ne,f as se,l as P}from"./material-e0a59a28.js";import"./@babel-e11bafe1.js";import"./react-dom-b0178e93.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-6cfbf744.js";import"./use-sync-external-store-18921cc2.js";import"./@date-io-f382d426.js";import"./dayjs-7f45ce31.js";import"./utils-c03c978f.js";import"./clsx-1229b3e0.js";import"./base-ff50cfe3.js";import"./@popperjs-f3391c26.js";import"./rifm-7b0f12ad.js";import"./system-a1d29c52.js";import"./styled-engine-f3bd09bf.js";import"./@emotion-77835cc8.js";import"./stylis-79144faa.js";import"./private-theming-970ac73c.js";import"./react-transition-group-7ded6f4d.js";import"./dom-helpers-9a525042.js";import"./redux-persist-d9cc1560.js";import"./redux-b7ba668d.js";import"./@reduxjs-4d37e7cf.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-4a70c6fc.js";import"./react-router-dom-60901e53.js";import"./@remix-run-d753ad9e.js";import"./react-icons-55b3b9a0.js";const N={date:new Date,customer:"",from:null,to:null,otherField:"",field1:"",field2:"",field3:"",termsAndCond:"",ddChanger:500,ratePer:"",stations:[]},h={date:{invalid:!1,message:""},customer:{invalid:!1,message:""},from:{invalid:!1,message:""},to:{invalid:!1,message:""},ratePer:{invalid:!1,message:""},stations:{invalid:!1,message:""}},Ve=()=>{var T,f,H;const I=Y(G),[l,u]=v.useState(N),[a,C]=v.useState(h),[A,E]=v.useState(""),{places:B}=Y(({quotation:t})=>t)||{},L=Z(),R=V(),D=v.useCallback(()=>{L("/transactions/quotations")},[L]),w=()=>{u(N),E(""),C(h)},M=()=>{D()},c=t=>{const r=t.target.name,i=t.target.value;u(o=>({...o,[r]:i}))},y=t=>{t.preventDefault(),Q(l)||R(U(l)).then(({payload:r={}})=>{const{message:i}=(r==null?void 0:r.data)||{};i?E(i):(E(""),C(h),u(N),D())}).catch(r=>{E(r.message)})},Q=t=>{var o,d,g,q,S;const r={...h};t.date||(r.date={invalid:!0,message:"Date is required"}),(d=(o=t.customer)==null?void 0:o.trim)!=null&&d.call(o)||(r.customer={invalid:!0,message:"Customer is required"}),t.from||(r.from={invalid:!0,message:"From date is required"}),t.to||(r.to={invalid:!0,message:"To date is required"}),(q=(g=t.ratePer)==null?void 0:g.trim)!=null&&q.call(g)||(r.ratePer={invalid:!0,message:"Rate type is required"}),(S=t.stations)!=null&&S.length||(r.stations={invalid:!0,message:"At least one entry is required"});let i=!1;for(const O in r)r[O].invalid===!0&&(i=!0);return i&&C(r),i},b=(t,r)=>{u(i=>({...i,[t]:new Date(r)}))},j=(t,r)=>{var i,o;if(t.preventDefault(),(i=l.stations)!=null&&i.length){const d=l.stations;(o=d==null?void 0:d.splice)==null||o.call(d,r,1),u(g=>({...g,stations:d}))}};return e.createElement(e.Fragment,null,I&&e.createElement(J,null),e.createElement("h1",{className:"pageHead"},"Add a quotation"),e.createElement("div",{className:"inner-wrap"},A!==""&&e.createElement($,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(ee,{severity:"error"},A)),e.createElement(te,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("form",{action:"",onSubmit:y,id:"quotationForm"},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:a.date.invalid},e.createElement(x,{dateAdapter:z},e.createElement(F,{error:a.date.invalid,label:"Date",inputFormat:"DD/MM/YYYY",value:l.date,onChange:b.bind(null,"date"),renderInput:t=>e.createElement(m,{name:"date",size:"small",autoComplete:"off",...t,error:a.date.invalid})})),a.date.invalid&&e.createElement(p,null,a.date.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small",error:a.customer.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Customer",error:a.customer.invalid,value:l.customer,onChange:c,name:"customer",id:"customer"}),a.customer.invalid&&e.createElement(p,null,a.customer.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:a.from.invalid},e.createElement(x,{dateAdapter:z},e.createElement(F,{error:a.from.invalid,label:"From date",inputFormat:"DD/MM/YYYY",value:l.from,onChange:b.bind(null,"from"),renderInput:t=>e.createElement(m,{name:"from",size:"small",autoComplete:"off",...t,error:a.from.invalid})})),a.from.invalid&&e.createElement(p,null,a.from.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:a.to.invalid},e.createElement(x,{dateAdapter:z},e.createElement(F,{error:a.to.invalid,label:"To date",inputFormat:"DD/MM/YYYY",value:l.to,onChange:b.bind(null,"to"),renderInput:t=>e.createElement(m,{name:"to",size:"small",autoComplete:"off",...t,error:a.to.invalid})})),a.to.invalid&&e.createElement(p,null,a.to.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small",error:a.ratePer.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Rate per",helperText:"Ex. for 'Full Load' use short (F.L.)",FormHelperTextProps:{disabled:!0,classes:{sizeSmall:"small"}},value:l.ratePer,error:a.ratePer.invalid,onChange:c,name:"ratePer",id:"ratePer"}),a.ratePer.invalid&&e.createElement(p,null,a.ratePer.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small"},e.createElement(m,{size:"small",variant:"outlined",label:"Other header field",helperText:"Ex. for 'Half Load' use short (H.L.)",FormHelperTextProps:{disabled:!0,classes:{sizeSmall:"small"}},value:l.otherField,onChange:c,name:"otherField",id:"otherField"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small"},e.createElement(m,{size:"small",variant:"outlined",label:"Additional Terms and Condition",value:l.termsAndCond,onChange:c,name:"termsAndCond",id:"termsAndCond",inputProps:{maxLength:500}}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small"},e.createElement(m,{size:"small",variant:"outlined",label:"DD Changer",value:l.ddChanger||"",onChange:c,onInput:K,name:"ddChanger",id:"ddChanger",InputProps:{startAdornment:e.createElement(ae,{position:"start"},"₹"),maxLength:10},inputProps:{maxLength:10}}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small"},e.createElement(m,{size:"small",variant:"outlined",label:"Field 1",value:l.field1,onChange:c,name:"field1",id:"field1",inputProps:{maxLength:20}}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small"},e.createElement(m,{size:"small",variant:"outlined",label:"Field 2",value:l.field2,onChange:c,name:"field2",id:"field2",inputProps:{maxLength:20}}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small"},e.createElement(m,{size:"small",variant:"outlined",label:"Field 3",value:l.field3,onChange:c,name:"field3",id:"field3",inputProps:{maxLength:20}}))))),e.createElement(W,{sx:{margin:"20px 0"}}),a.stations.invalid&&e.createElement("p",{className:"error"},a.stations.message),e.createElement(X,{places:B,quotation:l,setQuotation:u}),((T=l.stations)==null?void 0:T.length)>0?e.createElement(re,null,e.createElement(le,{sx:{width:"80%"},className:"tbl_jsm"},e.createElement(ie,null,e.createElement(k,null,e.createElement(n,null,"Station"),e.createElement(n,{align:"right"},"Rate per ",l.ratePer),e.createElement(n,{align:"right"},l.otherField),e.createElement(n,{align:"right"},l.field1),e.createElement(n,{align:"right"},l.field2),e.createElement(n,{align:"right"},l.field3),e.createElement(n,{align:"center"},"Action"))),e.createElement(ne,null,(H=(f=l.stations)==null?void 0:f.map)==null?void 0:H.call(f,(t,r)=>e.createElement(k,{key:r,sx:{"&:last-child td, &:last-child th":{border:0}}},e.createElement(n,null,t.station),e.createElement(n,{align:"right"},"₹ ",t.amount),e.createElement(n,{align:"right"},"₹ ",t.otherFieldValue),e.createElement(n,{align:"right"},"₹ ",t.field1),e.createElement(n,{align:"right"},"₹ ",t.field2),e.createElement(n,{align:"right"},"₹ ",t.field3),e.createElement(n,{align:"center"},e.createElement(se,{size:"small",onClick:i=>j(i,r),color:"error"},e.createElement(_,null)))))))):null,e.createElement(W,{sx:{margin:"20px 0"}}),e.createElement("div",{className:"right"},e.createElement(P,{variant:"outlined",size:"medium",onClick:M},"Back"),e.createElement(P,{variant:"outlined",size:"medium",onClick:w,className:"ml6"},"Reset"),e.createElement(P,{variant:"contained",size:"medium",type:"submit",color:"primary",form:"quotationForm",className:"ml6"},"Save")))))};export{Ve as default};
