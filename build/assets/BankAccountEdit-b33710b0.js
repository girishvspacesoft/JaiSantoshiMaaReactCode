import{r as s,a as t}from"./react-bfabd40c.js";import{u as Q,a as D}from"./react-redux-45d870ba.js";import{aH as ee,aL as te,aN as ae,L as ne,al as ie,aO as re}from"./index-66f971e4.js";import"./Card.module-3bdbfb7f.js";import{a as ce,b as oe}from"./react-router-622b2d59.js";import{O as le,Q as se,a as ue,i as d,A as V,h as p,V as g,l as T}from"./material-e0a59a28.js";import"./@babel-e11bafe1.js";import"./react-dom-b0178e93.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-6cfbf744.js";import"./use-sync-external-store-18921cc2.js";import"./redux-persist-d9cc1560.js";import"./redux-b7ba668d.js";import"./@reduxjs-4d37e7cf.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-4a70c6fc.js";import"./react-router-dom-60901e53.js";import"./@remix-run-d753ad9e.js";import"./icons-material-4539f19e.js";import"./react-icons-55b3b9a0.js";import"./system-a1d29c52.js";import"./styled-engine-f3bd09bf.js";import"./@emotion-77835cc8.js";import"./stylis-79144faa.js";import"./utils-c03c978f.js";import"./private-theming-970ac73c.js";import"./react-transition-group-7ded6f4d.js";import"./dom-helpers-9a525042.js";import"./base-ff50cfe3.js";import"./@popperjs-f3391c26.js";const H={bank:"",ifsc:"",accountType:"",accountHolder:"",customerId:"",accountNo:"",openingBalance:""},C={bank:{invalid:!1,message:""},ifsc:{invalid:!1,message:""},accountType:{invalid:!1,message:""},accountHolder:{invalid:!1,message:""},customerId:{invalid:!1,message:""},accountNo:{invalid:!1,message:""},openingBalance:{invalid:!1,message:""}},me=["Current account","Saving account","Recurring account","Fixed Deposit / Account"],je=()=>{const j=Q(ee),{banks:i}=Q(({bankaccount:e})=>e),[c,u]=s.useState(H),[o,G]=s.useState(H),[n,S]=s.useState(C),[A,v]=s.useState(""),B=D(),F=ce(),J=oe(),{bankAccountId:I}=J.state,x=s.useCallback(()=>{F("/master/bankAccounts")},[F]);s.useEffect(()=>{var e;u({...o,bank:(e=i==null?void 0:i.find)==null?void 0:e.call(i,({_id:a})=>(o==null?void 0:o.bank)===a),accountType:{label:o.accountType,value:o.accountType}})},[o,i]),s.useEffect(()=>{B(te())},[]),s.useEffect(()=>{I&&B(ae(I)).then(({payload:e={}})=>{const{message:a}=(e==null?void 0:e.data)||{};a?v(a):(u(e==null?void 0:e.data),G(e==null?void 0:e.data))}).catch(e=>{v(e.message)})},[I]);const K=()=>{var e;u({...o,bank:(e=i==null?void 0:i.find)==null?void 0:e.call(i,({_id:a})=>(o==null?void 0:o.bank)===a)}),v(""),S(C)},M=()=>{x()},E=e=>{const a=e.target.name,r=e.target.value;u(l=>({...l,[a]:r}))},U=(e,a)=>{u(r=>({...r,bank:a,ifsc:(a==null?void 0:a.ifsc)||""}))},X=(e,a)=>{u(r=>({...r,accountType:a}))},Y=e=>{var a,r;e.preventDefault(),Z(c)||B(re({...c,bank:(a=c.bank)==null?void 0:a._id,accountType:(r=c.accountType)==null?void 0:r.value})).then(({payload:l={}})=>{const{message:m}=(l==null?void 0:l.data)||{};m?v(m):(v(""),u(H),x())}).catch(l=>{v(l.message)})},Z=e=>{var l,m,z,f,W,b,L,h,O,q,y,N,P,R,_,k,w;const a={...C};(l=e.bank)!=null&&l._id||(a.bank={invalid:!0,message:"Bank is required"}),(z=(m=e.ifsc)==null?void 0:m.trim)!=null&&z.call(m)||(a.ifsc={invalid:!0,message:"IFSC code is required"}),(W=(f=e.accountHolder)==null?void 0:f.trim)!=null&&W.call(f)||(a.accountHolder={invalid:!0,message:"Account holder name is required"}),e.accountType||(a.accountType={invalid:!0,message:"Account type is required"}),(L=(b=e.customerId)==null?void 0:b.trim)!=null&&L.call(b)||(a.customerId={invalid:!0,message:"Customer ID is required"}),(O=(h=e.accountNo)==null?void 0:h.trim)!=null&&O.call(h)||(a.accountNo={invalid:!0,message:"Account number is required"}),(P=(N=(y=(q=e.openingBalance).toString)==null?void 0:y.call(q))==null?void 0:N.trim)!=null&&P.call(N)||(a.openingBalance={invalid:!0,message:"Opening balance is required"}),((w=(k=(_=(R=e.openingBalance).toString)==null?void 0:_.call(R))==null?void 0:k.trim)==null?void 0:w.call(k))!==""&&isNaN(e.openingBalance)&&isNaN(parseFloat(e.openingBalance))&&(a.openingBalance={invalid:!0,message:"Opening balance should be a number"});let r=!1;for(const $ in a)a[$].invalid===!0&&(r=!0);return r&&S(a),r};return t.createElement(t.Fragment,null,j&&t.createElement(ne,null),t.createElement("h1",{className:"pageHead"},"Edit a bank account"),A!==""&&t.createElement(le,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},t.createElement(se,{severity:"error"},A)),t.createElement(ue,{sx:{padding:"20px",marginBottom:"20px"}},t.createElement("form",{action:"",onSubmit:Y},t.createElement("div",{className:"grid grid-6-col"},t.createElement("div",{className:"grid-item"},t.createElement(d,{fullWidth:!0,size:"small",error:n.bank.invalid},t.createElement(V,{disablePortal:!0,autoSelect:!0,size:"small",name:"bank",options:i,value:c.bank,onChange:(e,a)=>U(e,a),openOnFocus:!0,renderInput:e=>t.createElement(p,{...e,label:"Bank",error:n.bank.invalid,fullWidth:!0})}),n.bank.invalid&&t.createElement(g,null,n.bank.message))),t.createElement("div",{className:"grid-item"},t.createElement(d,{fullWidth:!0,error:n.ifsc.invalid},t.createElement(p,{size:"small",variant:"outlined",label:"IFSC",value:c.ifsc,error:n.ifsc.invalid,onChange:E,name:"ifsc",id:"ifsc",InputProps:{readOnly:!0}}),n.ifsc.invalid&&t.createElement(g,null,n.ifsc.message))),t.createElement("div",{className:"grid-item"},t.createElement(d,{fullWidth:!0,size:"small",error:n.accountType.invalid},t.createElement(V,{disablePortal:!0,autoSelect:!0,size:"small",name:"accountType",options:me,value:c.accountType,onChange:(e,a)=>X(e,a),openOnFocus:!0,renderInput:e=>t.createElement(p,{...e,label:"Account type",error:n.accountType.invalid,fullWidth:!0})}),n.accountType.invalid&&t.createElement(g,null,n.accountType.message))),t.createElement("div",{className:"grid-item"},t.createElement(d,{fullWidth:!0,error:n.accountHolder.invalid},t.createElement(p,{size:"small",variant:"outlined",label:"Account holder",value:c.accountHolder,error:n.accountHolder.invalid,onChange:E,name:"accountHolder",id:"accountHolder"}),n.accountHolder.invalid&&t.createElement(g,null,n.accountHolder.message))),t.createElement("div",{className:"grid-item"},t.createElement(d,{fullWidth:!0,error:n.customerId.invalid},t.createElement(p,{size:"small",variant:"outlined",label:"Customer Id",error:n.customerId.invalid,value:c.customerId,onChange:E,name:"customerId",id:"customerId"}),n.customerId.invalid&&t.createElement(g,null,n.customerId.message))),t.createElement("div",{className:"grid-item"},t.createElement(d,{fullWidth:!0,error:n.accountNo.invalid},t.createElement(p,{size:"small",variant:"outlined",label:"Account number",value:c.accountNo,error:n.accountNo.invalid,onChange:E,name:"accountNo",id:"accountNo"}),n.accountNo.invalid&&t.createElement(g,null,n.accountNo.message))),t.createElement("div",{className:"grid-item"},t.createElement(d,{fullWidth:!0,error:n.openingBalance.invalid},t.createElement(p,{size:"small",variant:"outlined",label:"Opening balance",value:c.openingBalance||"",error:n.openingBalance.invalid,onChange:E,onInput:ie,name:"openingBalance",id:"openingBalance"}),n.openingBalance.invalid&&t.createElement(g,null,n.openingBalance.message)))),t.createElement("div",{className:"right"},t.createElement(T,{variant:"outlined",size:"medium",onClick:M},"Back"),t.createElement(T,{variant:"outlined",size:"medium",onClick:K,className:"ml6"},"Reset"),t.createElement(T,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save")))))};export{je as default};
