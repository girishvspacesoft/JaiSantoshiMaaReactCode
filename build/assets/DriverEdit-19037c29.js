import{r as p,a as e}from"./react-ef3a9354.js";import{d as N}from"./dayjs-39ab3f8d.js";import{L as Y,A,D as C}from"./x-date-pickers-488148bd.js";import{U as Z,a0 as _,L as ee,O as P,a1 as te,$ as q}from"./index-38e56929.js";import"./Card.module-3bdbfb7f.js";import{a as re,u as ae}from"./react-redux-60e7b2bb.js";import{a as ne,b as ie}from"./react-router-c905df87.js";import{O as le,Q as se,a as me,i as l,h as s,V as g,A as x,l as W}from"./material-a209ad60.js";import"./@babel-5e587562.js";import"./@date-io-28dabb9c.js";import"./utils-7edb168f.js";import"./clsx-1229b3e0.js";import"./base-7d25deaf.js";import"./react-dom-7dcc36ef.js";import"./scheduler-765c72db.js";import"./@popperjs-f3391c26.js";import"./rifm-3b678e07.js";import"./system-5cdc79da.js";import"./styled-engine-b70b2ed8.js";import"./@emotion-afe87aa6.js";import"./hoist-non-react-statics-1d21e5a8.js";import"./stylis-79144faa.js";import"./private-theming-1cbad2aa.js";import"./react-transition-group-6e6f7170.js";import"./dom-helpers-9a525042.js";import"./redux-persist-cccb0614.js";import"./redux-fa075741.js";import"./@reduxjs-2459f64e.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-21b846bc.js";import"./react-router-dom-584a1cea.js";import"./@remix-run-8989dd9f.js";import"./icons-material-e9adcbb1.js";import"./react-icons-5ea1dfbe.js";import"./use-sync-external-store-54e50305.js";const O={code:"",name:"",correspondenceAddress:"",permanentAddress:"",dateOfBirth:null,telephone:"",mobile:"",fatherName:"",referencedBy:"",eyeSight:"",licenseNo:"",licenseType:"",qualification:"",joiningDate:null,bloodGroup:"",renewDate:null,expiryDate:null,remark:""},M={name:{invalid:!1,message:""},correspondenceAddress:{invalid:!1,message:""},telephone:{invalid:!1,message:""},mobile:{invalid:!1,message:""},licenseNo:{invalid:!1,message:""}},Qe=()=>{const[a,u]=p.useState(O),[R,G]=p.useState(O),[n,w]=p.useState(M),[F,d]=p.useState(""),L=re(),S=ne(),Q=ie(),{driverId:z}=Q.state,J=ae(Z),k=p.useCallback(()=>{S("/master/drivers")},[S]);p.useEffect(()=>{z!==""&&L(_(z)).then(({payload:t={}})=>{const{message:r,dateOfBirth:i,joiningDate:m,renewDate:v,expiryDate:c}=(t==null?void 0:t.data)||{};r?d(r):(d(""),i&&(t.data.dateOfBirth=N(i)),m&&(t.data.joiningDate=N(m)),v&&(t.data.renewDate=N(v)),c&&(t.data.expiryDate=N(c)),u(t==null?void 0:t.data),G(t==null?void 0:t.data))}).catch(t=>{d(t.message)})},[z]);const U=()=>{u(R),d(""),w(M)},V=()=>{k()},o=t=>{const r=t.target.name,i=t.target.value;u(m=>({...m,[r]:i}))},B=(t,r)=>{u(i=>({...i,[r]:t}))},$=t=>{if(t.preventDefault(),!K(a)){const r=a;r.dateOfBirth&&(r.dateOfBirth=new Date(r.dateOfBirth)),r.joiningDate&&(r.joiningDate=new Date(r.joiningDate)),r.renewDate&&(r.renewDate=new Date(r.renewDate)),r.expiryDate&&(r.expiryDate=new Date(r.expiryDate)),L(te(r)).then(({payload:i={}})=>{const{message:m}=(i==null?void 0:i.data)||{};m?d(m):(d(""),u(O),k())}).catch(i=>{d(i.message)})}},h=(t,r)=>{u(i=>({...i,[t]:r}))},K=t=>{var m,v,c,y,E,I,f,j,b,H,D,T;const r={...M};(v=(m=t.name)==null?void 0:m.trim)!=null&&v.call(m)||(r.name={invalid:!0,message:"Name is required"}),(y=(c=t.correspondenceAddress)==null?void 0:c.trim)!=null&&y.call(c)||(r.correspondenceAddress={invalid:!0,message:"Address is required"}),(I=(E=t.telephone)==null?void 0:E.trim)!=null&&I.call(E)||(r.telephone={invalid:!0,message:"Telephone is required"}),t.telephone&&((j=(f=t.telephone)==null?void 0:f.trim)==null?void 0:j.call(f))!==""&&!q.test(t.telephone)&&(r.telephone={invalid:!0,message:"Telephone number should be 10 digits number"}),t.mobile&&((H=(b=t.mobile)==null?void 0:b.trim)==null?void 0:H.call(b))!==""&&!q.test(t.mobile)&&(r.mobile={invalid:!0,message:"Mobile number should be 10 digits number"}),(T=(D=t.licenseNo)==null?void 0:D.trim)!=null&&T.call(D)||(r.licenseNo={invalid:!0,message:"License no is required"});let i=!1;for(const X in r)r[X].invalid===!0&&(i=!0);return i&&w(r),i};return e.createElement(e.Fragment,null,J&&e.createElement(ee,null),e.createElement("div",{className:"inner-wrap"},e.createElement("h1",{className:"pageHead"},"Edit a driver"),F!==""&&e.createElement(le,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(se,{severity:"error"},F)),e.createElement("form",{action:"",onSubmit:$},e.createElement(me,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0},e.createElement(s,{size:"small",variant:"outlined",label:"Code",value:a.code,onChange:o,name:"code",id:"code",InputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:n.name.invalid},e.createElement(s,{size:"small",variant:"outlined",label:"Driver name",value:a.name,error:n.name.invalid,onChange:o,name:"name",id:"name"}),n.name.invalid&&e.createElement(g,null,n.name.message))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:n.correspondenceAddress.invalid},e.createElement(s,{size:"small",variant:"outlined",label:"Correspondence address",value:a.correspondenceAddress,error:n.correspondenceAddress.invalid,onChange:o,name:"correspondenceAddress",id:"correspondenceAddress"}),n.correspondenceAddress.invalid&&e.createElement(g,null,n.correspondenceAddress.message))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0},e.createElement(s,{size:"small",variant:"outlined",label:"Permanent address",value:a.permanentAddress,onChange:o,name:"permanentAddress",id:"permanentAddress"}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:!0},e.createElement(Y,{dateAdapter:A},e.createElement(C,{label:"Date of birth",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.dateOfBirth,disableFuture:!0,onChange:h.bind(null,"dateOfBirth"),renderInput:t=>e.createElement(s,{name:"dateOfBirth",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:n.telephone.invalid},e.createElement(s,{size:"small",variant:"outlined",label:"Telephone",value:a.telephone,error:n.telephone.invalid,onChange:o,onInput:P,name:"telephone",id:"telephone"}),n.telephone.invalid&&e.createElement(g,null,n.telephone.message))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:n.mobile.invalid},e.createElement(s,{size:"small",variant:"outlined",label:"Mobile",value:a.mobile,error:n.mobile.invalid,onChange:o,onInput:P,name:"mobile",id:"mobile"}),n.mobile.invalid&&e.createElement(g,null,n.mobile.message))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0},e.createElement(s,{size:"small",variant:"outlined",label:"Father name",value:a.fatherName,onChange:o,name:"fatherName",id:"fatherName"}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0},e.createElement(s,{size:"small",variant:"outlined",label:"Referenced by",value:a.referencedBy,onChange:o,name:"referencedBy",id:"referencedBy"}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,size:"small"},e.createElement(x,{disablePortal:!0,size:"small",name:"eyeSight",getOptionLabel:t=>t,options:["Normal","Good"],value:a.eyeSight,onChange:(t,r)=>B(r,"eyeSight"),openOnFocus:!0,renderInput:t=>e.createElement(s,{...t,label:"Eyesight",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:n.licenseNo.invalid},e.createElement(s,{size:"small",variant:"outlined",label:"License no",value:a.licenseNo,error:n.licenseNo.invalid,onChange:o,name:"licenseNo",id:"licenseNo"}),n.licenseNo.invalid&&e.createElement(g,null,n.licenseNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,size:"small"},e.createElement(x,{disablePortal:!0,size:"small",name:"licenseType",options:["Higher heavy","Heavy","Non-heavy","Normal"],value:a.licenseType,onChange:(t,r)=>B(r,"licenseType"),getOptionLabel:t=>t,openOnFocus:!0,renderInput:t=>e.createElement(s,{...t,label:"License type",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:!0},e.createElement(Y,{dateAdapter:A},e.createElement(C,{label:"Renew date",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.renewDate,onChange:h.bind(null,"renewDate"),renderInput:t=>e.createElement(s,{name:"renewDate",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:!0},e.createElement(Y,{dateAdapter:A},e.createElement(C,{label:"Expiry date",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.expiryDate,onChange:h.bind(null,"expiryDate"),renderInput:t=>e.createElement(s,{name:"expiryDate",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0},e.createElement(s,{size:"small",variant:"outlined",label:"Qualification",value:a.qualification,onChange:o,name:"qualification",id:"qualification"}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,error:!0},e.createElement(Y,{dateAdapter:A},e.createElement(C,{label:"Joining date",inputFormat:"DD/MM/YYYY",format:"DD/MM/YYYY",value:a.joiningDate,onChange:h.bind(null,"joiningDate"),renderInput:t=>e.createElement(s,{name:"joiningDate",size:"small",...t})})))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0,size:"small"},e.createElement(x,{disablePortal:!0,size:"small",name:"bloodGroup",options:["A-","B-","AB-","O-","A+","B+","AB+","O+"],value:a.bloodGroup,getOptionLabel:t=>t,onChange:(t,r)=>B(r,"bloodGroup"),openOnFocus:!0,renderInput:t=>e.createElement(s,{...t,label:"Blood group",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(l,{fullWidth:!0},e.createElement(s,{size:"small",variant:"outlined",label:"Remark",value:a.remark,onChange:o,name:"remark",id:"remark"})))),e.createElement("div",{className:"right"},e.createElement(W,{variant:"outlined",size:"medium",onClick:V},"Back"),e.createElement(W,{variant:"outlined",size:"medium",onClick:U,className:"ml6"},"Reset"),e.createElement(W,{variant:"contained",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))))))};export{Qe as default};
