import{r as s,a as e}from"./react-69b9bddd.js";import{u as v,a as Q}from"./react-redux-13959126.js";import{a$ as V,bk as $,L as j,k as G,bl as J}from"./index-c349c545.js";import"./Card.module-3bdbfb7f.js";import{a as K}from"./react-router-7dadf37a.js";import{O as M,Q as U,a as X,A as z,h as m,i as d,V as k,l as H}from"./material-04052d9a.js";import"./@babel-5e587562.js";import"./react-dom-69e96a05.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-1d21e5a8.js";import"./use-sync-external-store-20ba4de3.js";import"./redux-persist-a379f351.js";import"./redux-fa075741.js";import"./@reduxjs-2459f64e.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-21b846bc.js";import"./react-router-dom-38324838.js";import"./@remix-run-8989dd9f.js";import"./icons-material-40f8e5d8.js";import"./react-icons-6bc9af43.js";import"./system-49be6911.js";import"./styled-engine-f8044af8.js";import"./@emotion-17579717.js";import"./stylis-79144faa.js";import"./utils-49fe0532.js";import"./private-theming-ec89146b.js";import"./react-transition-group-deabed87.js";import"./dom-helpers-9a525042.js";import"./base-e8cfb5a9.js";import"./@popperjs-f3391c26.js";const E={lr:"",foNum:""},N={lr:{invalid:!1,message:""},foNum:{invalid:!1,message:""}},ke=()=>{var R,O,x,C;const W=v(V),y=v(t=>t.user),[l,f]=s.useState(E),[A,P]=s.useState([]),[n,h]=s.useState(N),[b,c]=s.useState(""),[u,S]=s.useState(null),{branches:o}=v(({lorryreceipt:t})=>t),F=K(),L=Q(),B=s.useCallback(()=>{F("/transactions/lorryReceipts")},[F]);s.useEffect(()=>{u&&L($(u==null?void 0:u._id)).then(({payload:t={}})=>{var a,i;const{message:r}=(t==null?void 0:t.data)||{};if(r)c(r);else{c("");const g=(i=(a=t==null?void 0:t.data)==null?void 0:a.map)==null?void 0:i.call(a,p=>({...p,label:p.lrNo,value:p.lrNo}));P(g)}}).catch(t=>{c(t.message)})},[u]),s.useEffect(()=>{var r;const t=(r=o==null?void 0:o.find)==null?void 0:r.call(o,a=>a._id===y.branch);t&&S(t)},[o]);const T=()=>{B()},_=t=>{const r=t.target.name,a=t.target.value;f(i=>({...i,[r]:a}))},I=(t,r)=>{S(r),f(E)},q=t=>{if(t.preventDefault(),!w(l)){const r={_id:l.lr._id,foNum:l.foNum};L(J(r)).then(({payload:a={}})=>{const{message:i}=(a==null?void 0:a.data)||{};i?c(i):(c(""),f(E),h(N))}).catch(a=>{c(a.message)})}},w=t=>{var i,g;const r={...N};t.lr||(r.lr={invalid:!0,message:"Lorry receipt is required"}),(g=(i=t.foNum)==null?void 0:i.trim)!=null&&g.call(i)||(r.foNum={invalid:!0,message:"FO no is required"});let a=!1;for(const p in r)r[p].invalid===!0&&(a=!0);return a&&h(r),a},D=(t,r,a)=>{f(i=>({...i,[a]:r,foNum:(r==null?void 0:r.foNum)||""}))};return e.createElement(e.Fragment,null,W&&e.createElement(j,null),e.createElement("div",{className:"inner-wrap"},e.createElement("h1",{className:"pageHead"},"Add FO no"),b!==""&&e.createElement(M,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(U,{severity:"error"},b)),e.createElement("form",{action:"",onSubmit:q,id:"lorryReceiptForm"},e.createElement(X,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(z,{disablePortal:!0,size:"small",name:"branch",className:"multi-select",options:o,value:u||null,onChange:I,disabled:!G(),getOptionLabel:t=>t.name,openOnFocus:!0,renderInput:t=>e.createElement(m,{...t,label:"Select branch",fullWidth:!0})})),e.createElement("div",{className:"grid-item"},e.createElement(d,{fullWidth:!0,size:"small",error:n.lr.invalid},e.createElement(z,{disablePortal:!0,autoSelect:!0,autoHighlight:!0,size:"small",name:"vehicleNo",options:A,value:l.lr||null,onChange:(t,r)=>D(t,r,"lr"),openOnFocus:!0,renderInput:t=>e.createElement(m,{...t,label:"Lorry receipt",error:n.lr.invalid,fullWidth:!0})}),n.lr.invalid&&e.createElement(k,null,n.lr.message))),e.createElement("div",{className:"grid-item"},e.createElement(d,{fullWidth:!0},e.createElement(m,{size:"small",variant:"outlined",label:"Consignor",value:((R=l.lr)==null?void 0:R.consignorName)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(d,{fullWidth:!0},e.createElement(m,{size:"small",variant:"outlined",label:"From",value:((O=l.lr)==null?void 0:O.from)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(d,{fullWidth:!0},e.createElement(m,{size:"small",variant:"outlined",label:"Consignee",value:((x=l.lr)==null?void 0:x.consigneeName)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(d,{fullWidth:!0},e.createElement(m,{size:"small",variant:"outlined",label:"To",value:((C=l.lr)==null?void 0:C.to)||"",name:"lsNo",id:"lsNo",inputProps:{readOnly:!0}}))),e.createElement("div",{className:"grid-item"},e.createElement(d,{fullWidth:!0,error:n.foNum.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"FO no.",value:l.foNum,onChange:_,error:n.foNum.invalid,name:"foNum",id:"foNum"}),n.foNum.invalid&&e.createElement(k,null,n.foNum.message)))),e.createElement("div",{className:"right"},e.createElement(H,{variant:"outlined",size:"medium",onClick:T},"Back"),e.createElement(H,{variant:"contained",size:"medium",type:"submit",color:"primary",form:"lorryReceiptForm",className:"ml6"},"Save"))))))};export{ke as default};
