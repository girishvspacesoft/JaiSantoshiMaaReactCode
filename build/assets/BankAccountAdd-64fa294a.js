import{r as v,a as e}from"./react-bfabd40c.js";import{a as J,u as K}from"./react-redux-45d870ba.js";import{aH as U,aL as X,L as Y,al as Z,aM as $}from"./index-2b581a02.js";import"./Card.module-3bdbfb7f.js";import{a as D}from"./react-router-622b2d59.js";import{O as ee,Q as te,a as ae,i as s,A as y,h as m,V as u,l as B}from"./material-e0a59a28.js";import"./@babel-e11bafe1.js";import"./react-dom-b0178e93.js";import"./scheduler-765c72db.js";import"./hoist-non-react-statics-6cfbf744.js";import"./use-sync-external-store-18921cc2.js";import"./redux-persist-d9cc1560.js";import"./redux-b7ba668d.js";import"./@reduxjs-4d37e7cf.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-4a70c6fc.js";import"./react-router-dom-60901e53.js";import"./@remix-run-d753ad9e.js";import"./icons-material-4539f19e.js";import"./react-icons-55b3b9a0.js";import"./system-a1d29c52.js";import"./styled-engine-f3bd09bf.js";import"./@emotion-77835cc8.js";import"./stylis-79144faa.js";import"./utils-c03c978f.js";import"./private-theming-970ac73c.js";import"./react-transition-group-7ded6f4d.js";import"./dom-helpers-9a525042.js";import"./base-ff50cfe3.js";import"./@popperjs-f3391c26.js";const I={bank:"",ifsc:"",accountType:"",accountHolder:"",customerId:"",accountNo:"",openingBalance:""},H={bank:{invalid:!1,message:""},ifsc:{invalid:!1,message:""},accountType:{invalid:!1,message:""},accountHolder:{invalid:!1,message:""},customerId:{invalid:!1,message:""},accountNo:{invalid:!1,message:""},openingBalance:{invalid:!1,message:""}},We=()=>{const[d,R]=v.useState([]),[r,p]=v.useState(I),[n,A]=v.useState(H),[C,g]=v.useState(""),S=D(),T=J(),w=K(U),x=v.useCallback(()=>{S("/master/bankAccounts")},[S]);v.useEffect(()=>{T(X()).then(({payload:t={}})=>{const{message:a}=(t==null?void 0:t.data)||{};a?g(a):R(t==null?void 0:t.data)}).catch(t=>{g(t.message)})},[]);const P=()=>{p(I),g(""),A(H)},_=()=>{x()},f=t=>{var c;const a=t.target.name,i=t.target.value;if(p(l=>({...l,[a]:i})),a==="bank"){const l=(c=d==null?void 0:d.filter)==null?void 0:c.call(d,o=>o._id===i);l!=null&&l.length&&p(o=>({...o,ifsc:l[0].ifsc}))}},M=(t,a)=>{p(i=>({...i,bank:a,ifsc:(a==null?void 0:a.ifsc)||""}))},Q=(t,a)=>{p(i=>({...i,accountType:a}))},V=t=>{var a;t.preventDefault(),j(r)||T($({...r,bank:(a=r.bank)==null?void 0:a._id})).then(({payload:i={}})=>{const{message:c}=(i==null?void 0:i.data)||{};c?g(c):(g(""),p(I),x())}).catch(i=>{g(i.message)})},j=t=>{var c,l,o,z,E,F,b,L,h,O,N,W,k,q;const a={...H};t.bank||(a.bank={invalid:!0,message:"Bank is required"}),(l=(c=t.ifsc)==null?void 0:c.trim)!=null&&l.call(c)||(a.ifsc={invalid:!0,message:"IFSC code is required"}),(z=(o=t.accountHolder)==null?void 0:o.trim)!=null&&z.call(o)||(a.accountHolder={invalid:!0,message:"Account holder name is required"}),(F=(E=t.accountType)==null?void 0:E.trim)!=null&&F.call(E)||(a.accountType={invalid:!0,message:"Account type is required"}),(L=(b=t.customerId)==null?void 0:b.trim)!=null&&L.call(b)||(a.customerId={invalid:!0,message:"Customer ID is required"}),(O=(h=t.accountNo)==null?void 0:h.trim)!=null&&O.call(h)||(a.accountNo={invalid:!0,message:"Account number is required"}),(W=(N=t.openingBalance)==null?void 0:N.trim)!=null&&W.call(N)||(a.openingBalance={invalid:!0,message:"Opening balance is required"}),((q=(k=t.openingBalance)==null?void 0:k.trim)==null?void 0:q.call(k))!==""&&isNaN(t.openingBalance)&&isNaN(parseFloat(t.openingBalance))&&(a.openingBalance={invalid:!0,message:"Opening balance should be a number"});let i=!1;for(const G in a)a[G].invalid===!0&&(i=!0);return i&&A(a),i};return e.createElement(e.Fragment,null,e.createElement("div",{className:"inner-wrap"},w&&e.createElement(Y,null),e.createElement("h1",{className:"pageHead"},"Add a bank account"),C!==""&&e.createElement(ee,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(te,{severity:"error"},C)),e.createElement(ae,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("form",{action:"",onSubmit:V},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small",error:n.bank.invalid},e.createElement(y,{autoSelect:!0,size:"small",name:"bank",options:d,value:r.bank||null,onChange:(t,a)=>M(t,a),openOnFocus:!0,getOptionLabel:t=>t.name,renderInput:t=>e.createElement(m,{...t,label:"Bank",error:n.bank.invalid,fullWidth:!0})}),n.bank.invalid&&e.createElement(u,null,n.bank.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.ifsc.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"IFSC",value:r.ifsc,error:n.ifsc.invalid,onChange:f,name:"ifsc",id:"ifsc",InputProps:{readOnly:!0}}),n.ifsc.invalid&&e.createElement(u,null,n.ifsc.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small",error:n.accountType.invalid},e.createElement(y,{autoSelect:!0,size:"small",name:"accountType",options:["Current account","Saving account","Recurring account","Fixed Deposit / Account"],value:r.accountType||null,onChange:(t,a)=>Q(t,a),openOnFocus:!0,getOptionLabel:t=>t,renderInput:t=>e.createElement(m,{...t,label:"Account type",error:n.accountType.invalid,fullWidth:!0})}),n.accountType.invalid&&e.createElement(u,null,n.accountType.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.accountHolder.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Account holder",value:r.accountHolder,error:n.accountHolder.invalid,onChange:f,name:"accountHolder",id:"accountHolder"}),n.accountHolder.invalid&&e.createElement(u,null,n.accountHolder.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.customerId.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Customer Id",error:n.customerId.invalid,value:r.customerId,onChange:f,name:"customerId",id:"customerId"}),n.customerId.invalid&&e.createElement(u,null,n.customerId.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.accountNo.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Account number",value:r.accountNo,error:n.accountNo.invalid,onChange:f,name:"accountNo",id:"accountNo"}),n.accountNo.invalid&&e.createElement(u,null,n.accountNo.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:n.openingBalance.invalid},e.createElement(m,{size:"small",variant:"outlined",label:"Opening balance",value:r.openingBalance||"",error:n.openingBalance.invalid,onChange:f,onInput:Z,name:"openingBalance",id:"openingBalance"}),n.openingBalance.invalid&&e.createElement(u,null,n.openingBalance.message)))),e.createElement("div",{className:"right"},e.createElement(B,{variant:"outlined",size:"medium",onClick:_},"Back"),e.createElement(B,{variant:"outlined",size:"medium",onClick:P,className:"ml6"},"Reset"),e.createElement(B,{variant:"outlined",size:"medium",type:"submit",color:"primary",className:"ml6"},"Save"))))))};export{We as default};
